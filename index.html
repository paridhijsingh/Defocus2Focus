<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Defocus2Focus - Where Procrastination Meets Play</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes slideIn {
        from {
          transform: translateX(100%);
        }
        to {
          transform: translateX(0);
        }
      }
      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }
      .animate-fade-in {
        animation: fadeIn 0.5s ease-out;
      }
      .animate-slide-in {
        animation: slideIn 0.3s ease-out;
      }
      .animate-pulse {
        animation: pulse 2s infinite;
      }
      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      .glass-effect {
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.1);
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      // Welcome Screen Component
      const WelcomeScreen = ({ onStart }) => (
        <div className="min-h-screen gradient-bg flex items-center justify-center p-4">
          <div className="text-center text-white animate-fade-in">
            <div className="text-8xl mb-6 animate-pulse">üéØ</div>
            <h1 className="text-6xl font-bold mb-4">Defocus2Focus</h1>
            <p className="text-2xl mb-8 opacity-90">
              Where Procrastination Meets Play
            </p>
            <p className="text-lg mb-12 opacity-80 max-w-2xl mx-auto">
              Transform your productivity with our gamified approach to focus
              and breaks. Master the art of Defocus ‚Üí Focus ‚Üí Rewards.
            </p>
            <button
              onClick={onStart}
              className="bg-white text-purple-600 px-12 py-4 rounded-full text-xl font-bold hover:bg-gray-100 transition-all duration-300 transform hover:scale-105 shadow-lg"
            >
              Start Your Journey
            </button>
          </div>
        </div>
      );

      // Onboarding Carousel Component
      const OnboardingCarousel = ({ onComplete, onSkip }) => {
        const [currentStep, setCurrentStep] = useState(0);
        const [isVisible, setIsVisible] = useState(true);

        const steps = [
          {
            id: "welcome",
            title: "Welcome to Defocus2Focus! üéØ",
            subtitle: "Where Procrastination Meets Play",
            description:
              "Transform your productivity with our gamified approach to focus and breaks.",
            icon: "üéØ",
            color: "blue",
            illustration: "‚ú®",
          },
          {
            id: "defocus-mode",
            title: "Defocus Mode üåø",
            subtitle: "Mindful Breaks & Recovery",
            description:
              "Take purposeful breaks with journaling, scribbling, and mini-games to reset your mind.",
            icon: "üåø",
            color: "orange",
            illustration: "üßò",
            features: [
              "Journaling",
              "Scribble",
              "Mini Games",
              "Mindful Breaks",
            ],
          },
          {
            id: "tasks-mode",
            title: "My Tasks üìù",
            subtitle: "Smart Task Management",
            description:
              "Organize your tasks with priorities, status tracking, and smart scheduling.",
            icon: "üìù",
            color: "green",
            illustration: "‚úÖ",
            features: [
              "Priority Levels",
              "Status Tracking",
              "Daily Planning",
              "Progress Monitoring",
            ],
          },
          {
            id: "focus-mode",
            title: "Focus Mode üéØ",
            subtitle: "Deep Work with Pomodoro",
            description:
              "Lock into deep work sessions using the Pomodoro technique with distraction blocking.",
            icon: "üéØ",
            color: "blue",
            illustration: "‚è∞",
            features: [
              "Pomodoro Timer",
              "Distraction Blocking",
              "Deep Work",
              "Session Tracking",
            ],
          },
          {
            id: "music-relax",
            title: "Music & Relax üéµ",
            subtitle: "Ambient Soundscapes",
            description:
              "Enhance your focus and relaxation with curated audio experiences.",
            icon: "üéµ",
            color: "purple",
            illustration: "üéß",
            features: [
              "Focus Music",
              "Nature Sounds",
              "Ambient Tracks",
              "Audio Controls",
            ],
          },
          {
            id: "break-time",
            title: "Break Time ‚òï",
            subtitle: "Smart Break Management",
            description:
              "Take structured breaks with customizable timers and activity suggestions.",
            icon: "‚òï",
            color: "yellow",
            illustration: "üïê",
            features: [
              "Custom Timers",
              "Break Suggestions",
              "Activity Tracking",
              "Recovery Monitoring",
            ],
          },
          {
            id: "rewards",
            title: "Rewards & Progress üèÜ",
            subtitle: "Stay Motivated",
            description:
              "Earn coins, build streaks, and unlock achievements as you build better habits.",
            icon: "üèÜ",
            color: "green",
            illustration: "‚≠ê",
            features: [
              "Achievement Badges",
              "Daily Streaks",
              "Coins & XP",
              "Progress History",
            ],
          },
        ];

        const nextStep = () => {
          if (currentStep < steps.length - 1) {
            setCurrentStep(currentStep + 1);
          } else {
            handleComplete();
          }
        };

        const prevStep = () => {
          if (currentStep > 0) {
            setCurrentStep(currentStep - 1);
          }
        };

        const handleComplete = () => {
          setIsVisible(false);
          setTimeout(() => {
            onComplete();
          }, 300);
        };

        const handleSkip = () => {
          setIsVisible(false);
          setTimeout(() => {
            onSkip();
          }, 300);
        };

        const currentStepData = steps[currentStep];
        const isLastStep = currentStep === steps.length - 1;
        const isFirstStep = currentStep === 0;

        if (!isVisible) return null;

        return (
          <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
            <div className="bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden transform transition-all duration-300 ease-in-out">
              {/* Header */}
              <div className="relative bg-gray-50 px-4 py-3">
                <div
                  className={`h-2 bg-gradient-to-r ${
                    currentStepData.color === "blue"
                      ? "from-blue-400 to-blue-600"
                      : currentStepData.color === "orange"
                      ? "from-orange-400 to-orange-600"
                      : currentStepData.color === "green"
                      ? "from-green-400 to-green-600"
                      : currentStepData.color === "purple"
                      ? "from-purple-400 to-purple-600"
                      : "from-yellow-400 to-yellow-600"
                  }`}
                  style={{
                    width: `${((currentStep + 1) / steps.length) * 100}%`,
                  }}
                ></div>

                {/* Skip Button */}
                <button
                  onClick={handleSkip}
                  className="absolute top-2 right-4 px-3 py-1 text-gray-600 hover:text-gray-800 hover:bg-gray-200 transition-all duration-200 text-sm font-medium rounded-lg border border-gray-300 bg-white shadow-sm"
                >
                  Skip
                </button>
              </div>

              {/* Content */}
              <div className="p-8 text-center">
                {/* Illustration */}
                <div className="mb-6">
                  <div
                    className={`w-20 h-20 mx-auto rounded-full flex items-center justify-center text-4xl mb-4 ${
                      currentStepData.color === "blue"
                        ? "bg-blue-100"
                        : currentStepData.color === "orange"
                        ? "bg-orange-100"
                        : currentStepData.color === "green"
                        ? "bg-green-100"
                        : currentStepData.color === "purple"
                        ? "bg-purple-100"
                        : "bg-yellow-100"
                    }`}
                  >
                    <span className="text-4xl">
                      {currentStepData.illustration}
                    </span>
                  </div>
                  <div className="text-6xl mb-2">{currentStepData.icon}</div>
                </div>

                {/* Title */}
                <h2 className="text-2xl font-bold text-gray-900 mb-2">
                  {currentStepData.title}
                </h2>

                {/* Subtitle */}
                <h3
                  className={`text-lg font-semibold mb-4 ${
                    currentStepData.color === "blue"
                      ? "text-blue-600"
                      : currentStepData.color === "orange"
                      ? "text-orange-600"
                      : currentStepData.color === "green"
                      ? "text-green-600"
                      : currentStepData.color === "purple"
                      ? "text-purple-600"
                      : "text-yellow-600"
                  }`}
                >
                  {currentStepData.subtitle}
                </h3>

                {/* Description */}
                <p className="text-gray-600 mb-6 leading-relaxed">
                  {currentStepData.description}
                </p>

                {/* Features List */}
                {currentStepData.features && (
                  <div className="mb-6">
                    <div className="grid grid-cols-2 gap-2">
                      {currentStepData.features.map((feature, index) => (
                        <div
                          key={index}
                          className="flex items-center justify-center p-2 bg-gray-50 rounded-lg"
                        >
                          <span className="text-sm text-gray-700 font-medium">
                            {feature}
                          </span>
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                {/* Progress Dots */}
                <div className="flex justify-center space-x-2 mb-6">
                  {steps.map((_, index) => (
                    <div
                      key={index}
                      className={`w-2 h-2 rounded-full transition-all duration-300 ${
                        index === currentStep
                          ? currentStepData.color === "blue"
                            ? "bg-blue-500"
                            : currentStepData.color === "orange"
                            ? "bg-orange-500"
                            : currentStepData.color === "green"
                            ? "bg-green-500"
                            : currentStepData.color === "purple"
                            ? "bg-purple-500"
                            : "bg-yellow-500"
                          : "bg-gray-300"
                      }`}
                    />
                  ))}
                </div>
              </div>

              {/* Footer */}
              <div className="px-8 pb-8">
                <div className="flex justify-between items-center">
                  {/* Back Button */}
                  <button
                    onClick={prevStep}
                    disabled={isFirstStep}
                    className={`px-6 py-3 rounded-xl font-medium transition-all duration-200 ${
                      isFirstStep
                        ? "text-gray-300 cursor-not-allowed"
                        : "text-gray-600 hover:text-gray-800 hover:bg-gray-100"
                    }`}
                  >
                    Back
                  </button>

                  {/* Skip Button (Center) */}
                  <button
                    onClick={handleSkip}
                    className="px-4 py-2 text-sm text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all duration-200 font-medium"
                  >
                    Skip Tutorial
                  </button>

                  {/* Next/Complete Button */}
                  <button
                    onClick={nextStep}
                    className={`px-8 py-3 rounded-xl font-medium text-white transition-all duration-200 transform hover:scale-105 ${
                      currentStepData.color === "blue"
                        ? "bg-blue-500 hover:bg-blue-600"
                        : currentStepData.color === "orange"
                        ? "bg-orange-500 hover:bg-orange-600"
                        : currentStepData.color === "green"
                        ? "bg-green-500 hover:bg-green-600"
                        : currentStepData.color === "purple"
                        ? "bg-purple-500 hover:bg-purple-600"
                        : "bg-yellow-500 hover:bg-yellow-600"
                    }`}
                  >
                    {isLastStep ? "Start My Journey" : "Next"}
                  </button>
                </div>
              </div>
            </div>
          </div>
        );
      };

      // Task Management Component
      const TaskManager = ({ tasks, setTasks, isLocked }) => {
        const [newTask, setNewTask] = useState("");
        const [priority, setPriority] = useState("medium");
        const [filter, setFilter] = useState("all");

        const addTask = () => {
          if (newTask.trim() && !isLocked) {
            const task = {
              id: Date.now(),
              text: newTask,
              priority,
              status: "pending",
              createdAt: new Date().toISOString(),
              completedAt: null,
            };
            setTasks([...tasks, task]);
            setNewTask("");
          }
        };

        const updateTaskStatus = (id, status) => {
          if (!isLocked) {
            setTasks(
              tasks.map((task) =>
                task.id === id
                  ? {
                      ...task,
                      status,
                      completedAt:
                        status === "completed"
                          ? new Date().toISOString()
                          : null,
                    }
                  : task
              )
            );
          }
        };

        const moveToNextDay = (id) => {
          if (!isLocked) {
            setTasks(
              tasks.map((task) =>
                task.id === id
                  ? { ...task, status: "pending", movedToNextDay: true }
                  : task
              )
            );
          }
        };

        const deleteTask = (id) => {
          if (!isLocked) {
            setTasks(tasks.filter((task) => task.id !== id));
          }
        };

        const filteredTasks = tasks.filter((task) => {
          if (filter === "all") return true;
          return task.status === filter;
        });

        const getPriorityColor = (priority) => {
          switch (priority) {
            case "high":
              return "bg-red-100 text-red-800 border-red-200";
            case "medium":
              return "bg-yellow-100 text-yellow-800 border-yellow-200";
            case "low":
              return "bg-green-100 text-green-800 border-green-200";
            default:
              return "bg-gray-100 text-gray-800 border-gray-200";
          }
        };

        const getStatusColor = (status) => {
          switch (status) {
            case "completed":
              return "bg-green-100 text-green-800";
            case "in-progress":
              return "bg-blue-100 text-blue-800";
            case "pending":
              return "bg-gray-100 text-gray-800";
            default:
              return "bg-gray-100 text-gray-800";
          }
        };

        return (
          <div className="bg-white rounded-xl shadow-lg p-6">
            <div className="flex items-center justify-between mb-6">
              <h3 className="text-xl font-bold text-gray-900">üìù My Tasks</h3>
              {isLocked && (
                <span className="text-sm text-red-600 bg-red-100 px-3 py-1 rounded-full">
                  üîí Locked during Focus
                </span>
              )}
            </div>

            {/* Add Task Form */}
            {!isLocked && (
              <div className="mb-6 p-4 bg-gray-50 rounded-lg">
                <div className="flex gap-3 mb-3">
                  <input
                    type="text"
                    value={newTask}
                    onChange={(e) => setNewTask(e.target.value)}
                    placeholder="Add a new task..."
                    className="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    onKeyPress={(e) => e.key === "Enter" && addTask()}
                  />
                  <select
                    value={priority}
                    onChange={(e) => setPriority(e.target.value)}
                    className="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  >
                    <option value="low">Low</option>
                    <option value="medium">Medium</option>
                    <option value="high">High</option>
                  </select>
                  <button
                    onClick={addTask}
                    className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
                  >
                    Add
                  </button>
                </div>
              </div>
            )}

            {/* Filter Tabs */}
            <div className="flex gap-2 mb-4">
              {["all", "pending", "in-progress", "completed"].map(
                (filterType) => (
                  <button
                    key={filterType}
                    onClick={() => setFilter(filterType)}
                    className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${
                      filter === filterType
                        ? "bg-blue-600 text-white"
                        : "bg-gray-100 text-gray-700 hover:bg-gray-200"
                    }`}
                  >
                    {filterType.charAt(0).toUpperCase() +
                      filterType.slice(1).replace("-", " ")}
                  </button>
                )
              )}
            </div>

            {/* Tasks List */}
            <div className="space-y-3 max-h-96 overflow-y-auto">
              {filteredTasks.length === 0 ? (
                <div className="text-center py-8 text-gray-500">
                  <div className="text-4xl mb-2">üìù</div>
                  <p>No tasks found</p>
                </div>
              ) : (
                filteredTasks.map((task) => (
                  <div
                    key={task.id}
                    className="flex items-center gap-3 p-3 bg-gray-50 rounded-lg"
                  >
                    <input
                      type="checkbox"
                      checked={task.status === "completed"}
                      onChange={(e) =>
                        updateTaskStatus(
                          task.id,
                          e.target.checked ? "completed" : "pending"
                        )
                      }
                      disabled={isLocked}
                      className="w-5 h-5 text-blue-600 rounded focus:ring-blue-500"
                    />
                    <div className="flex-1">
                      <p
                        className={`font-medium ${
                          task.status === "completed"
                            ? "line-through text-gray-500"
                            : "text-gray-900"
                        }`}
                      >
                        {task.text}
                      </p>
                      <div className="flex gap-2 mt-1">
                        <span
                          className={`px-2 py-1 text-xs rounded-full border ${getPriorityColor(
                            task.priority
                          )}`}
                        >
                          {task.priority}
                        </span>
                        <span
                          className={`px-2 py-1 text-xs rounded-full ${getStatusColor(
                            task.status
                          )}`}
                        >
                          {task.status}
                        </span>
                      </div>
                    </div>
                    {!isLocked && (
                      <div className="flex gap-2">
                        {task.status === "pending" && (
                          <button
                            onClick={() =>
                              updateTaskStatus(task.id, "in-progress")
                            }
                            className="px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700"
                          >
                            Start
                          </button>
                        )}
                        {task.status === "in-progress" && (
                          <button
                            onClick={() =>
                              updateTaskStatus(task.id, "completed")
                            }
                            className="px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700"
                          >
                            Complete
                          </button>
                        )}
                        <button
                          onClick={() => moveToNextDay(task.id)}
                          className="px-3 py-1 text-xs bg-yellow-600 text-white rounded hover:bg-yellow-700"
                        >
                          Next Day
                        </button>
                        <button
                          onClick={() => deleteTask(task.id)}
                          className="px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"
                        >
                          Delete
                        </button>
                      </div>
                    )}
                  </div>
                ))
              )}
            </div>
          </div>
        );
      };

      // Pomodoro Timer Component
      const PomodoroTimer = ({
        onStart,
        onStop,
        isActive,
        timeLeft,
        sessionType,
      }) => {
        const formatTime = (seconds) => {
          const mins = Math.floor(seconds / 60);
          const secs = seconds % 60;
          return `${mins.toString().padStart(2, "0")}:${secs
            .toString()
            .padStart(2, "0")}`;
        };

        const getProgress = () => {
          const total = sessionType === "focus" ? 25 * 60 : 5 * 60;
          return ((total - timeLeft) / total) * 100;
        };

        return (
          <div className="bg-white rounded-xl shadow-lg p-6 text-center">
            <h3 className="text-xl font-bold text-gray-900 mb-4">
              {sessionType === "focus" ? "üéØ Focus Session" : "‚òï Break Time"}
            </h3>

            <div className="relative w-48 h-48 mx-auto mb-6">
              <svg
                className="w-48 h-48 transform -rotate-90"
                viewBox="0 0 100 100"
              >
                <circle
                  cx="50"
                  cy="50"
                  r="45"
                  stroke="#e5e7eb"
                  strokeWidth="8"
                  fill="none"
                />
                <circle
                  cx="50"
                  cy="50"
                  r="45"
                  stroke={sessionType === "focus" ? "#3b82f6" : "#10b981"}
                  strokeWidth="8"
                  fill="none"
                  strokeDasharray={`${2 * Math.PI * 45}`}
                  strokeDashoffset={`${
                    2 * Math.PI * 45 * (1 - getProgress() / 100)
                  }`}
                  className="transition-all duration-1000 ease-out"
                />
              </svg>
              <div className="absolute inset-0 flex items-center justify-center">
                <div className="text-center">
                  <div className="text-4xl font-bold text-gray-900">
                    {formatTime(timeLeft)}
                  </div>
                  <div className="text-sm text-gray-600 mt-1">
                    {sessionType === "focus" ? "Focus Time" : "Break Time"}
                  </div>
                </div>
              </div>
            </div>

            <div className="flex gap-4 justify-center">
              {!isActive ? (
                <button
                  onClick={onStart}
                  className="px-8 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors"
                >
                  Start {sessionType === "focus" ? "Focus" : "Break"}
                </button>
              ) : (
                <button
                  onClick={onStop}
                  className="px-8 py-3 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition-colors"
                >
                  Stop
                </button>
              )}
            </div>
          </div>
        );
      };

             // Audio Player Component
       const AudioPlayer = ({
         audioFiles,
         currentTrack,
         setCurrentTrack,
         isPlaying,
         setIsPlaying,
       }) => {
         const audioRef = useRef(null);
         const [selectedCategory, setSelectedCategory] = useState("All");

         useEffect(() => {
           if (audioRef.current) {
             if (isPlaying) {
               audioRef.current.play().catch(console.error);
             } else {
               audioRef.current.pause();
             }
           }
         }, [isPlaying, currentTrack]);

         const playPause = () => {
           setIsPlaying(!isPlaying);
         };

         const nextTrack = () => {
           const filteredFiles = getFilteredFiles();
           const currentIndex = filteredFiles.findIndex(
             (file) => file.name === currentTrack
           );
           const nextIndex = (currentIndex + 1) % filteredFiles.length;
           setCurrentTrack(filteredFiles[nextIndex].name);
         };

         const prevTrack = () => {
           const filteredFiles = getFilteredFiles();
           const currentIndex = filteredFiles.findIndex(
             (file) => file.name === currentTrack
           );
           const prevIndex =
             currentIndex === 0 ? filteredFiles.length - 1 : currentIndex - 1;
           setCurrentTrack(filteredFiles[prevIndex].name);
         };

         const getFilteredFiles = () => {
           if (selectedCategory === "All") return audioFiles;
           return audioFiles.filter(file => file.category === selectedCategory);
         };

         const getCategories = () => {
           const categories = ["All", ...new Set(audioFiles.map(file => file.category))];
           return categories;
         };

         const currentFile = audioFiles.find(
           (file) => file.name === currentTrack
         );

         const filteredFiles = getFilteredFiles();

         return (
           <div className="bg-white rounded-xl shadow-lg p-6">
             <h3 className="text-xl font-bold text-gray-900 mb-4">
               üéµ Music & Relax
             </h3>

             {/* Category Filter */}
             <div className="mb-6">
               <div className="flex flex-wrap gap-2">
                 {getCategories().map((category) => (
                   <button
                     key={category}
                     onClick={() => setSelectedCategory(category)}
                     className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${
                       selectedCategory === category
                         ? "bg-blue-600 text-white"
                         : "bg-gray-100 text-gray-700 hover:bg-gray-200"
                     }`}
                   >
                     {category}
                   </button>
                 ))}
               </div>
             </div>

             <div className="text-center mb-6">
               <div className="text-4xl mb-2">üéß</div>
               <h4 className="text-lg font-semibold text-gray-900">
                 {currentFile?.name || "No track selected"}
               </h4>
               <p className="text-sm text-gray-600">
                 {currentFile?.category || ""}
               </p>
             </div>

             <div className="flex justify-center gap-4 mb-6">
               <button
                 onClick={prevTrack}
                 className="p-3 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors"
               >
                 ‚èÆÔ∏è
               </button>
               <button
                 onClick={playPause}
                 className="p-4 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-colors"
               >
                 {isPlaying ? "‚è∏Ô∏è" : "‚ñ∂Ô∏è"}
               </button>
               <button
                 onClick={nextTrack}
                 className="p-3 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors"
               >
                 ‚è≠Ô∏è
               </button>
             </div>

             <div className="space-y-2 max-h-64 overflow-y-auto">
               {filteredFiles.length === 0 ? (
                 <div className="text-center py-8 text-gray-500">
                   <div className="text-4xl mb-2">üéµ</div>
                   <p>No tracks found in this category</p>
                 </div>
               ) : (
                 filteredFiles.map((file, index) => (
                   <button
                     key={index}
                     onClick={() => setCurrentTrack(file.name)}
                     className={`w-full text-left p-3 rounded-lg transition-colors ${
                       currentTrack === file.name
                         ? "bg-blue-100 text-blue-900"
                         : "bg-gray-50 hover:bg-gray-100 text-gray-700"
                     }`}
                   >
                     <div className="flex items-center gap-3">
                       <span className="text-lg">{file.icon}</span>
                       <div>
                         <div className="font-medium">{file.name}</div>
                         <div className="text-sm opacity-75">{file.category}</div>
                       </div>
                     </div>
                   </button>
                 ))
               )}
             </div>

             {currentFile && (
               <audio
                 ref={audioRef}
                 src={currentFile.url}
                 onEnded={nextTrack}
                 onError={(e) => {
                   console.error("Audio error:", e);
                   setIsPlaying(false);
                 }}
                 preload="metadata"
               />
             )}
           </div>
         );
       };

      // Main Dashboard Component
      const Dashboard = ({ user, onLogout }) => {
        const [activeSection, setActiveSection] = useState("defocus");
        const [tasks, setTasks] = useState([]);
        const [isFocusMode, setIsFocusMode] = useState(false);
        const [isBreakMode, setIsBreakMode] = useState(false);
        const [focusTimeLeft, setFocusTimeLeft] = useState(25 * 60);
        const [breakTimeLeft, setBreakTimeLeft] = useState(5 * 60);
        const [isFocusActive, setIsFocusActive] = useState(false);
        const [isBreakActive, setIsBreakActive] = useState(false);
        const [currentTrack, setCurrentTrack] = useState("Lofi Hip Hop");
        const [isPlaying, setIsPlaying] = useState(false);
        const [coins, setCoins] = useState(150);
        const [streak, setStreak] = useState(7);
        const [xp, setXp] = useState(1250);

        const audioFiles = [
          // Focus Music
          {
            name: "Lofi Hip Hop",
            category: "Focus",
            icon: "üéµ",
            url: "./assets/audio/focus/lofi.mp3",
          },
          {
            name: "Classical",
            category: "Focus",
            icon: "üéº",
            url: "./assets/audio/focus/classical.mp3",
          },
          {
            name: "Piano",
            category: "Focus",
            icon: "üéπ",
            url: "./assets/audio/focus/piano.mp3",
          },
          {
            name: "Binaural",
            category: "Focus",
            icon: "üß†",
            url: "./assets/audio/focus/Binaural.mp3",
          },
          {
            name: "White Noise",
            category: "Focus",
            icon: "üåä",
            url: "./assets/audio/focus/white noise.mp3",
          },
          {
            name: "Brown Noise",
            category: "Focus",
            icon: "üåä",
            url: "./assets/audio/focus/brown noise.mp3",
          },
          // Nature Sounds
          {
            name: "Rain",
            category: "Nature",
            icon: "üåßÔ∏è",
            url: "./assets/audio/nature/rain.mp3",
          },
          {
            name: "Ocean",
            category: "Nature",
            icon: "üåä",
            url: "./assets/audio/nature/ocean.mp3",
          },
          {
            name: "Forest",
            category: "Nature",
            icon: "üå≤",
            url: "./assets/audio/nature/forest.mp3",
          },
          {
            name: "Birds",
            category: "Nature",
            icon: "üê¶",
            url: "./assets/audio/nature/birds.mp3",
          },
          {
            name: "Thunder",
            category: "Nature",
            icon: "‚õàÔ∏è",
            url: "./assets/audio/nature/thunder.mp3",
          },
          {
            name: "Wind",
            category: "Nature",
            icon: "üí®",
            url: "./assets/audio/nature/wind.mp3",
          },
          // Ambient Sounds
          {
            name: "Cafe",
            category: "Ambient",
            icon: "‚òï",
            url: "./assets/audio/ambient/cafe.mp3",
          },
          {
            name: "Fireplace",
            category: "Ambient",
            icon: "üî•",
            url: "./assets/audio/ambient/fireplace.mp3",
          },
          {
            name: "Library",
            category: "Ambient",
            icon: "üìö",
            url: "./assets/audio/ambient/library.mp3",
          },
          {
            name: "City",
            category: "Ambient",
            icon: "üèôÔ∏è",
            url: "./assets/audio/ambient/city.mp3",
          },
          {
            name: "Space",
            category: "Ambient",
            icon: "üöÄ",
            url: "./assets/audio/ambient/space.mp3",
          },
          {
            name: "Train",
            category: "Ambient",
            icon: "üöÇ",
            url: "./assets/audio/ambient/train.mp3",
          },
          // Relaxation Music
          {
            name: "Meditation",
            category: "Relax",
            icon: "üßò",
            url: "./assets/audio/relax/meditation.mp3",
          },
          {
            name: "Chimes",
            category: "Relax",
            icon: "üîî",
            url: "./assets/audio/relax/chimes.mp3",
          },
          {
            name: "Flute",
            category: "Relax",
            icon: "üéã",
            url: "./assets/audio/relax/flute.mp3",
          },
          {
            name: "Singing Bowl",
            category: "Relax",
            icon: "ü•£",
            url: "./assets/audio/relax/singing bowl.mp3",
          },
          {
            name: "Spa",
            category: "Relax",
            icon: "üõÅ",
            url: "./assets/audio/relax/spa.mp3",
          },
          {
            name: "Zen",
            category: "Relax",
            icon: "‚òØÔ∏è",
            url: "./assets/audio/relax/zen.mp3",
          },
        ];

        // Timer effects
        useEffect(() => {
          let interval;
          if (isFocusActive && focusTimeLeft > 0) {
            interval = setInterval(() => {
              setFocusTimeLeft((time) => {
                if (time <= 1) {
                  setIsFocusActive(false);
                  setIsFocusMode(false);
                  setIsBreakMode(true);
                  setBreakTimeLeft(5 * 60);
                  setCoins((prev) => prev + 25);
                  setXp((prev) => prev + 50);
                  return 25 * 60;
                }
                return time - 1;
              });
            }, 1000);
          }
          return () => clearInterval(interval);
        }, [isFocusActive, focusTimeLeft]);

        useEffect(() => {
          let interval;
          if (isBreakActive && breakTimeLeft > 0) {
            interval = setInterval(() => {
              setBreakTimeLeft((time) => {
                if (time <= 1) {
                  setIsBreakActive(false);
                  setIsBreakMode(false);
                  setCoins((prev) => prev + 10);
                  return 5 * 60;
                }
                return time - 1;
              });
            }, 1000);
          }
          return () => clearInterval(interval);
        }, [isBreakActive, breakTimeLeft]);

        const startFocus = () => {
          setIsFocusMode(true);
          setIsFocusActive(true);
          setActiveSection("focus");
        };

        const stopFocus = () => {
          setIsFocusActive(false);
          setIsFocusMode(false);
        };

        const startBreak = () => {
          setIsBreakMode(true);
          setIsBreakActive(true);
          setActiveSection("break");
        };

        const stopBreak = () => {
          setIsBreakActive(false);
          setIsBreakMode(false);
        };

        const isDefocusLocked = isFocusMode;

        const sections = [
          { id: "defocus", name: "Defocus", icon: "üåø", color: "orange" },
          { id: "tasks", name: "My Tasks", icon: "üìù", color: "green" },
          { id: "focus", name: "Focus", icon: "üéØ", color: "blue" },
          { id: "music", name: "Music & Relax", icon: "üéµ", color: "purple" },
          { id: "break", name: "Break Time", icon: "‚òï", color: "yellow" },
          { id: "rewards", name: "Rewards", icon: "üèÜ", color: "green" },
        ];

        return (
          <div className="min-h-screen bg-gray-50">
            {/* Header */}
            <header className="bg-white shadow-sm border-b border-gray-200">
              <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div className="flex justify-between items-center py-4">
                  <div className="flex items-center">
                    <h1 className="text-2xl font-bold text-gray-900">
                      üéØ Defocus2Focus
                    </h1>
                    <span className="ml-3 text-sm text-gray-500">
                      Welcome back, {user.name}!
                    </span>
                  </div>
                  <div className="flex items-center gap-4">
                    <div className="flex items-center gap-4 text-sm">
                      <div className="flex items-center gap-1">
                        <span>ü™ô</span>
                        <span className="font-semibold">{coins}</span>
                      </div>
                      <div className="flex items-center gap-1">
                        <span>üî•</span>
                        <span className="font-semibold">{streak} days</span>
                      </div>
                      <div className="flex items-center gap-1">
                        <span>‚≠ê</span>
                        <span className="font-semibold">{xp} XP</span>
                      </div>
                    </div>
                    <button
                      onClick={onLogout}
                      className="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors"
                    >
                      Logout
                    </button>
                  </div>
                </div>
              </div>
            </header>

            {/* Navigation */}
            <nav className="bg-white border-b border-gray-200">
              <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div className="flex space-x-8">
                  {sections.map((section) => (
                    <button
                      key={section.id}
                      onClick={() => setActiveSection(section.id)}
                      disabled={isDefocusLocked && section.id === "defocus"}
                      className={`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${
                        activeSection === section.id
                          ? `border-${section.color}-500 text-${section.color}-600`
                          : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"
                      } ${
                        isDefocusLocked && section.id === "defocus"
                          ? "opacity-50 cursor-not-allowed"
                          : ""
                      }`}
                    >
                      <span className="mr-2">{section.icon}</span>
                      {section.name}
                      {isDefocusLocked && section.id === "defocus" && (
                        <span className="ml-1">üîí</span>
                      )}
                    </button>
                  ))}
                </div>
              </div>
            </nav>

            {/* Main Content */}
            <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
              {activeSection === "defocus" && (
                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                  {isDefocusLocked && (
                    <div className="lg:col-span-2 bg-red-50 border border-red-200 rounded-xl p-6 text-center">
                      <div className="text-4xl mb-4">üîí</div>
                      <h3 className="text-xl font-bold text-red-800 mb-2">
                        Defocus Mode Locked
                      </h3>
                      <p className="text-red-600">
                        Defocus features are temporarily disabled during Focus
                        sessions to maintain productivity. Complete your focus
                        session to unlock these features.
                      </p>
                    </div>
                  )}
                  {!isDefocusLocked && (
                    <>
                      <div className="bg-white rounded-xl shadow-lg p-6">
                        <h3 className="text-xl font-bold text-gray-900 mb-4">
                          üìù Journaling
                        </h3>
                        <textarea
                          className="w-full h-32 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"
                          placeholder="Write your thoughts, reflections, or ideas here..."
                        />
                        <button className="mt-3 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors">
                          Save Entry
                        </button>
                      </div>
                      <div className="bg-white rounded-xl shadow-lg p-6">
                        <h3 className="text-xl font-bold text-gray-900 mb-4">
                          ‚úèÔ∏è Scribble
                        </h3>
                        <div className="h-32 bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center">
                          <p className="text-gray-500">
                            Scribble area - Coming soon!
                          </p>
                        </div>
                      </div>
                      <div className="bg-white rounded-xl shadow-lg p-6 lg:col-span-2">
                        <h3 className="text-xl font-bold text-gray-900 mb-4">
                          üéÆ Mini Games
                        </h3>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                          <button className="p-4 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors">
                            <div className="text-2xl mb-2">üß©</div>
                            <div className="font-medium">Puzzle</div>
                          </button>
                          <button className="p-4 bg-green-100 hover:bg-green-200 rounded-lg transition-colors">
                            <div className="text-2xl mb-2">üéØ</div>
                            <div className="font-medium">Memory</div>
                          </button>
                          <button className="p-4 bg-purple-100 hover:bg-purple-200 rounded-lg transition-colors">
                            <div className="text-2xl mb-2">üé≤</div>
                            <div className="font-medium">Quick Game</div>
                          </button>
                        </div>
                      </div>
                    </>
                  )}
                </div>
              )}

              {activeSection === "tasks" && (
                <TaskManager
                  tasks={tasks}
                  setTasks={setTasks}
                  isLocked={false}
                />
              )}

              {activeSection === "focus" && (
                <div className="max-w-md mx-auto">
                  <PomodoroTimer
                    onStart={startFocus}
                    onStop={stopFocus}
                    isActive={isFocusActive}
                    timeLeft={focusTimeLeft}
                    sessionType="focus"
                  />
                </div>
              )}

              {activeSection === "music" && (
                <div className="max-w-2xl mx-auto">
                  <AudioPlayer
                    audioFiles={audioFiles}
                    currentTrack={currentTrack}
                    setCurrentTrack={setCurrentTrack}
                    isPlaying={isPlaying}
                    setIsPlaying={setIsPlaying}
                  />
                </div>
              )}

              {activeSection === "break" && (
                <div className="max-w-md mx-auto">
                  <PomodoroTimer
                    onStart={startBreak}
                    onStop={stopBreak}
                    isActive={isBreakActive}
                    timeLeft={breakTimeLeft}
                    sessionType="break"
                  />
                  <div className="mt-6 bg-white rounded-xl shadow-lg p-6">
                    <h3 className="text-lg font-bold text-gray-900 mb-4">
                      Break Suggestions
                    </h3>
                    <div className="space-y-3">
                      <div className="p-3 bg-blue-50 rounded-lg">
                        <div className="font-medium">üßò Deep Breathing</div>
                        <div className="text-sm text-gray-600">
                          Take 5 deep breaths to reset
                        </div>
                      </div>
                      <div className="p-3 bg-green-50 rounded-lg">
                        <div className="font-medium">üö∂ Quick Walk</div>
                        <div className="text-sm text-gray-600">
                          Stretch your legs for 2 minutes
                        </div>
                      </div>
                      <div className="p-3 bg-yellow-50 rounded-lg">
                        <div className="font-medium">üíß Hydrate</div>
                        <div className="text-sm text-gray-600">
                          Drink some water to stay refreshed
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {activeSection === "rewards" && (
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                  <div className="bg-white rounded-xl shadow-lg p-6">
                    <h3 className="text-xl font-bold text-gray-900 mb-4">
                      üèÜ Achievements
                    </h3>
                    <div className="space-y-3">
                      <div className="flex items-center gap-3 p-3 bg-yellow-50 rounded-lg">
                        <span className="text-2xl">ü•á</span>
                        <div>
                          <div className="font-medium">Focus Master</div>
                          <div className="text-sm text-gray-600">
                            Complete 10 focus sessions
                          </div>
                        </div>
                      </div>
                      <div className="flex items-center gap-3 p-3 bg-blue-50 rounded-lg">
                        <span className="text-2xl">üî•</span>
                        <div>
                          <div className="font-medium">Streak Keeper</div>
                          <div className="text-sm text-gray-600">
                            7 day streak
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div className="bg-white rounded-xl shadow-lg p-6">
                    <h3 className="text-xl font-bold text-gray-900 mb-4">
                      üìä Progress
                    </h3>
                    <div className="space-y-4">
                      <div>
                        <div className="flex justify-between text-sm mb-1">
                          <span>Focus Sessions</span>
                          <span>15/20</span>
                        </div>
                        <div className="w-full bg-gray-200 rounded-full h-2">
                          <div
                            className="bg-blue-600 h-2 rounded-full"
                            style={{ width: "75%" }}
                          ></div>
                        </div>
                      </div>
                      <div>
                        <div className="flex justify-between text-sm mb-1">
                          <span>Tasks Completed</span>
                          <span>42/50</span>
                        </div>
                        <div className="w-full bg-gray-200 rounded-full h-2">
                          <div
                            className="bg-green-600 h-2 rounded-full"
                            style={{ width: "84%" }}
                          ></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div className="bg-white rounded-xl shadow-lg p-6">
                    <h3 className="text-xl font-bold text-gray-900 mb-4">
                      üìà History
                    </h3>
                    <div className="space-y-2 text-sm">
                      <div className="flex justify-between">
                        <span>Today</span>
                        <span>3 sessions</span>
                      </div>
                      <div className="flex justify-between">
                        <span>This Week</span>
                        <span>18 sessions</span>
                      </div>
                      <div className="flex justify-between">
                        <span>This Month</span>
                        <span>67 sessions</span>
                      </div>
                      <div className="flex justify-between">
                        <span>Total XP</span>
                        <span>{xp}</span>
                      </div>
                    </div>
                  </div>
                </div>
              )}
            </main>
          </div>
        );
      };

      // Main App Component
      const App = () => {
        const [currentScreen, setCurrentScreen] = useState("welcome");
        const [user, setUser] = useState({ name: "Paridhi", level: 12 });
        const [showOnboarding, setShowOnboarding] = useState(false);

        useEffect(() => {
          const completed = localStorage.getItem(
            "defocus2focus_onboarding_completed"
          );
          if (!completed) {
            setShowOnboarding(true);
          }
        }, []);

        const handleStart = () => {
          setCurrentScreen("onboarding");
          setShowOnboarding(true);
        };

        const handleOnboardingComplete = () => {
          localStorage.setItem("defocus2focus_onboarding_completed", "true");
          setShowOnboarding(false);
          setCurrentScreen("dashboard");
        };

        const handleOnboardingSkip = () => {
          localStorage.setItem("defocus2focus_onboarding_completed", "true");
          setShowOnboarding(false);
          setCurrentScreen("dashboard");
        };

        const handleLogout = () => {
          setCurrentScreen("welcome");
        };

        return (
          <div>
            {currentScreen === "welcome" && (
              <WelcomeScreen onStart={handleStart} />
            )}
            {currentScreen === "onboarding" && showOnboarding && (
              <OnboardingCarousel
                onComplete={handleOnboardingComplete}
                onSkip={handleOnboardingSkip}
              />
            )}
            {currentScreen === "dashboard" && (
              <Dashboard user={user} onLogout={handleLogout} />
            )}
          </div>
        );
      };

      // Render the app
      ReactDOM.render(<App />, document.getElementById("root"));
    </script>
  </body>
</html>
