<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Defocus2Focus - Where Procrastination Meets Play</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Custom animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideIn {
        from {
          transform: translateX(100%);
        }
        to {
          transform: translateX(0);
        }
      }

      .animate-fade-in {
        animation: fadeIn 0.5s ease-out;
      }

      .animate-slide-in {
        animation: slideIn 0.3s ease-out;
      }

      /* Enhanced Onboarding Animations */
      @keyframes slideInLeft {
        from {
          opacity: 0;
          transform: translateX(-50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes slideOutLeft {
        from {
          opacity: 1;
          transform: translateX(0);
        }
        to {
          opacity: 0;
          transform: translateX(-50px);
        }
      }

      @keyframes slideOutRight {
        from {
          opacity: 1;
          transform: translateX(0);
        }
        to {
          opacity: 0;
          transform: translateX(50px);
        }
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes float {
        0% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
        100% {
          transform: translateY(0px);
        }
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes glow {
        0% {
          box-shadow: 0 0 5px rgba(34, 197, 94, 0.5);
        }
        50% {
          box-shadow: 0 0 20px rgba(34, 197, 94, 0.8);
        }
        100% {
          box-shadow: 0 0 5px rgba(34, 197, 94, 0.5);
        }
      }

      .slide-in-left {
        animation: slideInLeft 0.3s ease-out;
      }

      .slide-in-right {
        animation: slideInRight 0.3s ease-out;
      }

      .slide-out-left {
        animation: slideOutLeft 0.3s ease-in;
      }

      .slide-out-right {
        animation: slideOutRight 0.3s ease-in;
      }

      .bounce-animation {
        animation: bounce 2s infinite;
      }

      .pulse-animation {
        animation: pulse 2s infinite;
      }

      .float-animation {
        animation: float 3s ease-in-out infinite;
      }

      .spin-animation {
        animation: spin 3s linear infinite;
      }

      .glow-animation {
        animation: glow 2s ease-in-out infinite;
      }

      .onboarding-card {
        transition: all 0.3s ease;
        transform-style: preserve-3d;
      }

      .onboarding-card:hover {
        transform: translateY(-5px) rotateX(5deg);
      }

      .feature-badge {
        transition: all 0.2s ease;
      }

      .feature-badge:hover {
        transform: scale(1.1);
        background: linear-gradient(45deg, #fbbf24, #f59e0b);
      }

      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        .dark {
          color-scheme: dark;
        }
      }

      /* Enhanced theme transitions */
      * {
        transition: background-color 0.3s ease, color 0.3s ease,
          border-color 0.3s ease;
      }

      /* Improved button hover effects */
      button:hover {
        transform: translateY(-1px);
      }

      button:active {
        transform: translateY(0);
      }

      /* Enhanced progress dots */
      .progress-dot {
        position: relative;
        overflow: hidden;
      }

      .progress-dot::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        transition: left 0.5s;
      }

      .progress-dot:hover::before {
        left: 100%;
      }

      /* Smooth slide transitions */
      .slide-in {
        animation: slideInLeft 0.4s ease-out;
      }

      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 6px;
      }

      ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 3px;
      }

      ::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 3px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      // Pomodoro Timer Component
      const PomodoroTimer = ({ onComplete, onSkip }) => {
        const [timeLeft, setTimeLeft] = useState(25 * 60); // 25 minutes in seconds
        const [isRunning, setIsRunning] = useState(false);
        const [isBreak, setIsBreak] = useState(false);
        const [sessionCount, setSessionCount] = useState(0);
        const [defocusLocked, setDefocusLocked] = useState(false);
        const [showDefocusRequired, setShowDefocusRequired] = useState(false);

        useEffect(() => {
          let interval = null;
          if (isRunning && timeLeft > 0) {
            interval = setInterval(() => {
              setTimeLeft((timeLeft) => timeLeft - 1);
            }, 1000);
          } else if (timeLeft === 0) {
            // Session completed
            if (!isBreak) {
              setSessionCount(sessionCount + 1);
              setIsBreak(true);
              setTimeLeft(5 * 60); // 5 minute break
            } else {
              setIsBreak(false);
              setTimeLeft(25 * 60); // Back to work
            }
            setIsRunning(false);
          }
          return () => clearInterval(interval);
        }, [isRunning, timeLeft, isBreak, sessionCount]);

        const startTimer = () => {
          // Check if defocus is required before starting focus
          if (!isBreak && !defocusLocked) {
            setShowDefocusRequired(true);
            return;
          }
          setIsRunning(true);
          setShowDefocusRequired(false);
        };
        const pauseTimer = () => setIsRunning(false);
        const resetTimer = () => {
          setIsRunning(false);
          setTimeLeft(25 * 60);
          setIsBreak(false);
          setDefocusLocked(false);
          setShowDefocusRequired(false);
        };

        const unlockDefocus = () => {
          setDefocusLocked(true);
          setShowDefocusRequired(false);
        };

        const formatTime = (seconds) => {
          const mins = Math.floor(seconds / 60);
          const secs = seconds % 60;
          return `${mins.toString().padStart(2, "0")}:${secs
            .toString()
            .padStart(2, "0")}`;
        };

        const progress = ((25 * 60 - timeLeft) / (25 * 60)) * 100;

        return React.createElement(
          "div",
          {
            className:
              "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",
          },
          React.createElement(
            "div",
            {
              className:
                "bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",
            },
            [
              // Header
              React.createElement(
                "div",
                {
                  key: "header",
                  className: `p-6 text-center ${
                    isBreak ? "bg-orange-500" : "bg-blue-500"
                  } text-white`,
                },
                [
                  React.createElement(
                    "h2",
                    {
                      key: "title",
                      className: "text-2xl font-bold mb-2",
                    },
                    isBreak ? "🌿 Break Time!" : "🎯 Focus Time!"
                  ),
                  React.createElement(
                    "p",
                    {
                      key: "subtitle",
                      className: "text-sm opacity-90",
                    },
                    isBreak
                      ? "Take a well-deserved break"
                      : "Stay focused and productive"
                  ),
                ]
              ),

              // Defocus Lock Warning
              showDefocusRequired &&
                React.createElement(
                  "div",
                  {
                    key: "defocus-warning",
                    className:
                      "bg-yellow-50 border-l-4 border-yellow-400 p-4 mx-6 mt-4 rounded-r-lg",
                  },
                  [
                    React.createElement(
                      "div",
                      {
                        key: "warning-content",
                        className: "flex items-center",
                      },
                      [
                        React.createElement(
                          "div",
                          {
                            key: "warning-icon",
                            className: "text-yellow-400 text-2xl mr-3",
                          },
                          "🔒"
                        ),
                        React.createElement("div", { key: "warning-text" }, [
                          React.createElement(
                            "h3",
                            {
                              key: "warning-title",
                              className: "text-sm font-medium text-yellow-800",
                            },
                            "Defocus Lock Active"
                          ),
                          React.createElement(
                            "p",
                            {
                              key: "warning-description",
                              className: "text-sm text-yellow-700 mt-1",
                            },
                            "Complete a defocus break before starting focus"
                          ),
                        ]),
                      ]
                    ),
                    React.createElement(
                      "button",
                      {
                        key: "unlock-button",
                        onClick: unlockDefocus,
                        className:
                          "mt-3 w-full bg-yellow-500 hover:bg-yellow-600 text-white py-2 px-4 rounded-lg transition-colors duration-200 text-sm font-medium",
                      },
                      "🌿 Take Defocus Break First"
                    ),
                  ]
                ),

              // Timer Display
              React.createElement(
                "div",
                {
                  key: "timer",
                  className: "p-8 text-center",
                },
                [
                  React.createElement(
                    "div",
                    {
                      key: "time-display",
                      className:
                        "text-6xl font-mono font-bold text-gray-800 mb-4",
                    },
                    formatTime(timeLeft)
                  ),
                  React.createElement(
                    "div",
                    {
                      key: "progress-bar",
                      className: "w-full bg-gray-200 rounded-full h-2 mb-6",
                    },
                    React.createElement("div", {
                      className: `h-2 rounded-full transition-all duration-1000 ${
                        isBreak ? "bg-orange-500" : "bg-blue-500"
                      }`,
                      style: { width: `${progress}%` },
                    })
                  ),
                  React.createElement(
                    "p",
                    {
                      key: "session-count",
                      className: "text-sm text-gray-600 mb-6",
                    },
                    `Sessions completed: ${sessionCount}`
                  ),
                ]
              ),

              // Controls
              React.createElement(
                "div",
                {
                  key: "controls",
                  className: "px-6 pb-6",
                },
                [
                  React.createElement(
                    "div",
                    {
                      key: "control-buttons",
                      className: "flex justify-center space-x-4 mb-4",
                    },
                    [
                      React.createElement(
                        "button",
                        {
                          key: "start-pause",
                          onClick: isRunning ? pauseTimer : startTimer,
                          className: `px-6 py-3 rounded-xl font-medium text-white transition-all duration-200 ${
                            isRunning
                              ? "bg-red-500 hover:bg-red-600"
                              : "bg-green-500 hover:bg-green-600"
                          }`,
                        },
                        isRunning ? "⏸️ Pause" : "▶️ Start"
                      ),
                      React.createElement(
                        "button",
                        {
                          key: "reset",
                          onClick: resetTimer,
                          className:
                            "px-6 py-3 rounded-xl font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition-all duration-200",
                        },
                        "🔄 Reset"
                      ),
                    ]
                  ),
                  React.createElement(
                    "div",
                    {
                      key: "action-buttons",
                      className: "flex justify-between",
                    },
                    [
                      React.createElement(
                        "button",
                        {
                          key: "skip",
                          onClick: onSkip,
                          className:
                            "px-4 py-2 text-sm text-gray-500 hover:text-gray-700 transition-colors duration-200",
                        },
                        "Skip Timer"
                      ),
                      React.createElement(
                        "button",
                        {
                          key: "complete",
                          onClick: () => {
                            onComplete(sessionCount);
                            onSkip();
                          },
                          className:
                            "px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200",
                        },
                        "Complete Session"
                      ),
                    ]
                  ),
                ]
              ),
            ]
          )
        );
      };

      // Defocus Mode Component
      const DefocusMode = ({ onComplete, onSkip }) => {
        const [currentActivity, setCurrentActivity] = useState("menu");
        const [breathingPhase, setBreathingPhase] = useState("inhale");
        const [breathingCount, setBreathingCount] = useState(0);
        const [gameScore, setGameScore] = useState(0);
        const [gameTime, setGameTime] = useState(30);
        const [journalText, setJournalText] = useState("");
        const [scribbleLines, setScribbleLines] = useState([]);
        const [currentLine, setCurrentLine] = useState([]);
        const [isDrawing, setIsDrawing] = useState(false);
        const [aiTherapistMessage, setAiTherapistMessage] = useState("");
        const [conversationHistory, setConversationHistory] = useState([]);

        // Breathing Exercise
        const BreathingExercise = () => {
          useEffect(() => {
            const phases = ["inhale", "hold", "exhale", "rest"];
            let currentPhaseIndex = 0;

            const interval = setInterval(() => {
              setBreathingPhase(phases[currentPhaseIndex]);
              currentPhaseIndex = (currentPhaseIndex + 1) % phases.length;

              if (currentPhaseIndex === 0) {
                setBreathingCount((prev) => prev + 1);
              }
            }, 4000);

            return () => clearInterval(interval);
          }, []);

          const getBreathingText = () => {
            switch (breathingPhase) {
              case "inhale":
                return "Breathe In";
              case "hold":
                return "Hold";
              case "exhale":
                return "Breathe Out";
              case "rest":
                return "Rest";
              default:
                return "Breathe";
            }
          };

          const getBreathingColor = () => {
            switch (breathingPhase) {
              case "inhale":
                return "bg-green-500";
              case "hold":
                return "bg-yellow-500";
              case "exhale":
                return "bg-blue-500";
              case "rest":
                return "bg-gray-500";
              default:
                return "bg-gray-500";
            }
          };

          return React.createElement("div", { className: "text-center" }, [
            React.createElement(
              "h3",
              { key: "title", className: "text-2xl font-bold mb-6" },
              "🧘 Breathing Exercise"
            ),
            React.createElement(
              "div",
              {
                key: "breathing-circle",
                className: `w-32 h-32 mx-auto rounded-full ${getBreathingColor()} transition-all duration-4000 flex items-center justify-center mb-6`,
              },
              React.createElement(
                "span",
                { className: "text-white text-xl font-semibold" },
                getBreathingText()
              )
            ),
            React.createElement(
              "p",
              { key: "count", className: "text-lg text-gray-600" },
              `Cycle ${breathingCount}`
            ),
          ]);
        };

        // Simple Click Game
        const ClickGame = () => {
          const [targetPosition, setTargetPosition] = useState({
            x: 50,
            y: 50,
          });
          const [gameActive, setGameActive] = useState(true);

          useEffect(() => {
            if (!gameActive) return;

            const timer = setInterval(() => {
              setGameTime((prev) => {
                if (prev <= 1) {
                  setGameActive(false);
                  return 0;
                }
                return prev - 1;
              });
            }, 1000);

            return () => clearInterval(timer);
          }, [gameActive]);

          const handleTargetClick = () => {
            if (!gameActive) return;

            setGameScore((prev) => prev + 1);
            setTargetPosition({
              x: Math.random() * 80 + 10,
              y: Math.random() * 60 + 20,
            });
          };

          return React.createElement("div", { className: "text-center" }, [
            React.createElement(
              "h3",
              { key: "title", className: "text-2xl font-bold mb-4" },
              "🎯 Click Game"
            ),
            React.createElement(
              "div",
              { key: "score", className: "text-lg mb-4" },
              `Score: ${gameScore} | Time: ${gameTime}s`
            ),
            React.createElement(
              "div",
              {
                key: "game-area",
                className:
                  "relative w-full h-64 bg-gray-100 rounded-lg overflow-hidden",
              },
              gameActive &&
                React.createElement("button", {
                  onClick: handleTargetClick,
                  className:
                    "absolute w-12 h-12 bg-red-500 rounded-full hover:bg-red-600 transition-colors duration-200",
                  style: {
                    left: `${targetPosition.x}%`,
                    top: `${targetPosition.y}%`,
                    transform: "translate(-50%, -50%)",
                  },
                })
            ),
            !gameActive &&
              React.createElement(
                "div",
                {
                  key: "game-over",
                  className: "mt-4 text-lg font-semibold text-green-600",
                },
                `Game Over! Final Score: ${gameScore}`
              ),
          ]);
        };

        // Journaling Component
        const Journaling = () => {
          const saveJournalEntry = () => {
            if (journalText.trim()) {
              const entry = {
                id: Date.now(),
                text: journalText,
                timestamp: new Date().toISOString(),
              };
              const savedEntries = JSON.parse(
                localStorage.getItem("defocus2focus_journal") || "[]"
              );
              savedEntries.push(entry);
              localStorage.setItem(
                "defocus2focus_journal",
                JSON.stringify(savedEntries)
              );
              setJournalText("");
              alert("Journal entry saved! 📝");
            }
          };

          return React.createElement("div", { className: "p-6" }, [
            React.createElement(
              "h3",
              {
                key: "title",
                className: "text-2xl font-bold mb-6 text-center",
              },
              "📝 Journal Your Thoughts"
            ),
            React.createElement(
              "div",
              { key: "journal-container", className: "space-y-4" },
              [
                React.createElement("textarea", {
                  key: "journal-input",
                  value: journalText,
                  onChange: (e) => setJournalText(e.target.value),
                  placeholder:
                    "Write whatever comes to mind...\n\nHow are you feeling?\nWhat's on your mind?\nWhat are you grateful for?",
                  className:
                    "w-full h-64 p-4 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",
                  rows: 10,
                }),
                React.createElement(
                  "div",
                  { key: "journal-actions", className: "flex space-x-3" },
                  [
                    React.createElement(
                      "button",
                      {
                        key: "save-btn",
                        onClick: saveJournalEntry,
                        className:
                          "flex-1 bg-purple-500 hover:bg-purple-600 text-white py-3 px-4 rounded-lg transition-colors duration-200",
                      },
                      "💾 Save Entry"
                    ),
                    React.createElement(
                      "button",
                      {
                        key: "clear-btn",
                        onClick: () => setJournalText(""),
                        className:
                          "flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 px-4 rounded-lg transition-colors duration-200",
                      },
                      "🗑️ Clear"
                    ),
                  ]
                ),
              ]
            ),
          ]);
        };

        // Scribble/Drawing Component
        const Scribble = () => {
          const canvasRef = React.useRef(null);

          const startDrawing = (e) => {
            setIsDrawing(true);
            const rect = canvasRef.current.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            setCurrentLine([{ x, y }]);
          };

          const draw = (e) => {
            if (!isDrawing) return;
            const rect = canvasRef.current.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            setCurrentLine((prev) => [...prev, { x, y }]);
          };

          const stopDrawing = () => {
            if (isDrawing) {
              setScribbleLines((prev) => [...prev, currentLine]);
              setCurrentLine([]);
              setIsDrawing(false);
            }
          };

          const clearScribble = () => {
            setScribbleLines([]);
            setCurrentLine([]);
          };

          const saveScribble = () => {
            const scribbleData = {
              id: Date.now(),
              lines: scribbleLines,
              timestamp: new Date().toISOString(),
            };
            const savedScribbles = JSON.parse(
              localStorage.getItem("defocus2focus_scribbles") || "[]"
            );
            savedScribbles.push(scribbleData);
            localStorage.setItem(
              "defocus2focus_scribbles",
              JSON.stringify(savedScribbles)
            );
            alert("Scribble saved! 🎨");
          };

          return React.createElement("div", { className: "p-6" }, [
            React.createElement(
              "h3",
              {
                key: "title",
                className: "text-2xl font-bold mb-6 text-center",
              },
              "🎨 Scribble & Draw"
            ),
            React.createElement(
              "div",
              { key: "scribble-container", className: "space-y-4" },
              [
                React.createElement(
                  "div",
                  {
                    key: "canvas-container",
                    className:
                      "border-2 border-gray-300 rounded-lg overflow-hidden",
                  },
                  React.createElement("canvas", {
                    ref: canvasRef,
                    width: 400,
                    height: 300,
                    className: "w-full h-64 bg-white cursor-crosshair",
                    onMouseDown: startDrawing,
                    onMouseMove: draw,
                    onMouseUp: stopDrawing,
                    onMouseLeave: stopDrawing,
                    style: { touchAction: "none" },
                  })
                ),
                React.createElement(
                  "div",
                  { key: "scribble-actions", className: "flex space-x-3" },
                  [
                    React.createElement(
                      "button",
                      {
                        key: "save-btn",
                        onClick: saveScribble,
                        className:
                          "flex-1 bg-pink-500 hover:bg-pink-600 text-white py-3 px-4 rounded-lg transition-colors duration-200",
                      },
                      "💾 Save Drawing"
                    ),
                    React.createElement(
                      "button",
                      {
                        key: "clear-btn",
                        onClick: clearScribble,
                        className:
                          "flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 px-4 rounded-lg transition-colors duration-200",
                      },
                      "🗑️ Clear Canvas"
                    ),
                  ]
                ),
                React.createElement(
                  "p",
                  {
                    key: "instructions",
                    className: "text-sm text-gray-600 text-center",
                  },
                  "Click and drag to draw. Express your creativity! 🎨"
                ),
              ]
            ),
          ]);
        };

        // AI Therapist Component
        const AITherapist = () => {
          const generateAIResponse = (message) => {
            const responses = [
              "That's a great insight! How does that make you feel?",
              "I understand. Taking breaks is important for productivity.",
              "It sounds like you're being mindful about your work-life balance.",
              "Remember, it's okay to take time for yourself.",
              "What would help you feel more refreshed right now?",
              "That's a thoughtful perspective. Tell me more about that.",
              "It sounds like you're processing a lot. How can I help?",
              "Taking care of your mental health is so important. What's on your mind?",
            ];
            return responses[Math.floor(Math.random() * responses.length)];
          };

          const sendMessage = () => {
            if (aiTherapistMessage.trim()) {
              const userMessage = {
                id: Date.now(),
                type: "user",
                text: aiTherapistMessage,
                timestamp: new Date().toISOString(),
              };

              const aiResponse = {
                id: Date.now() + 1,
                type: "ai",
                text: generateAIResponse(aiTherapistMessage),
                timestamp: new Date().toISOString(),
              };

              const newHistory = [
                ...conversationHistory,
                userMessage,
                aiResponse,
              ];
              setConversationHistory(newHistory);
              setAiTherapistMessage("");

              // Save conversation
              localStorage.setItem(
                "defocus2focus_therapist",
                JSON.stringify(newHistory)
              );
            }
          };

          const clearConversation = () => {
            setConversationHistory([]);
            localStorage.removeItem("defocus2focus_therapist");
          };

          return React.createElement("div", { className: "p-6" }, [
            React.createElement(
              "h3",
              {
                key: "title",
                className: "text-2xl font-bold mb-6 text-center",
              },
              "🤖 AI Therapist"
            ),
            React.createElement(
              "div",
              { key: "therapist-container", className: "space-y-4" },
              [
                React.createElement(
                  "div",
                  {
                    key: "conversation",
                    className:
                      "h-64 overflow-y-auto border border-gray-300 rounded-lg p-4 bg-gray-50",
                  },
                  conversationHistory.length === 0
                    ? React.createElement(
                        "p",
                        {
                          key: "welcome",
                          className: "text-gray-500 text-center",
                        },
                        "Hi! I'm here to listen. What's on your mind today? 💭"
                      )
                    : conversationHistory.map((msg) =>
                        React.createElement(
                          "div",
                          {
                            key: msg.id,
                            className: `mb-3 p-3 rounded-lg ${
                              msg.type === "user"
                                ? "bg-blue-500 text-white ml-8"
                                : "bg-white text-gray-800 mr-8 border"
                            }`,
                          },
                          [
                            React.createElement(
                              "p",
                              { key: "text", className: "text-sm" },
                              msg.text
                            ),
                            React.createElement(
                              "span",
                              { key: "time", className: "text-xs opacity-70" },
                              new Date(msg.timestamp).toLocaleTimeString()
                            ),
                          ]
                        )
                      )
                ),
                React.createElement(
                  "div",
                  { key: "input-container", className: "flex space-x-2" },
                  [
                    React.createElement("input", {
                      key: "message-input",
                      type: "text",
                      value: aiTherapistMessage,
                      onChange: (e) => setAiTherapistMessage(e.target.value),
                      placeholder: "Share what's on your mind...",
                      className:
                        "flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",
                      onKeyPress: (e) => e.key === "Enter" && sendMessage(),
                    }),
                    React.createElement(
                      "button",
                      {
                        key: "send-btn",
                        onClick: sendMessage,
                        className:
                          "bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg transition-colors duration-200",
                      },
                      "Send"
                    ),
                  ]
                ),
                React.createElement(
                  "button",
                  {
                    key: "clear-btn",
                    onClick: clearConversation,
                    className:
                      "w-full bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-lg transition-colors duration-200",
                  },
                  "🗑️ Clear Conversation"
                ),
              ]
            ),
          ]);
        };

        const renderActivity = () => {
          switch (currentActivity) {
            case "breathing":
              return React.createElement(BreathingExercise);
            case "game":
              return React.createElement(ClickGame);
            case "journal":
              return React.createElement(Journaling);
            case "scribble":
              return React.createElement(Scribble);
            case "therapist":
              return React.createElement(AITherapist);
            default:
              return React.createElement(
                "div",
                { className: "text-center p-6" },
                [
                  React.createElement(
                    "h3",
                    { key: "title", className: "text-2xl font-bold mb-6" },
                    "🌿 Defocus Activities"
                  ),
                  React.createElement(
                    "div",
                    { key: "activities", className: "grid grid-cols-1 gap-4" },
                    [
                      React.createElement(
                        "button",
                        {
                          key: "breathing",
                          onClick: () => setCurrentActivity("breathing"),
                          className:
                            "w-full bg-green-500 hover:bg-green-600 text-white py-4 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center",
                        },
                        [
                          React.createElement(
                            "span",
                            { key: "icon", className: "mr-3" },
                            "🧘"
                          ),
                          "Breathing Exercise",
                        ]
                      ),
                      React.createElement(
                        "button",
                        {
                          key: "game",
                          onClick: () => setCurrentActivity("game"),
                          className:
                            "w-full bg-blue-500 hover:bg-blue-600 text-white py-4 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center",
                        },
                        [
                          React.createElement(
                            "span",
                            { key: "icon", className: "mr-3" },
                            "🎯"
                          ),
                          "Click Game",
                        ]
                      ),
                      React.createElement(
                        "button",
                        {
                          key: "journal",
                          onClick: () => setCurrentActivity("journal"),
                          className:
                            "w-full bg-purple-500 hover:bg-purple-600 text-white py-4 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center",
                        },
                        [
                          React.createElement(
                            "span",
                            { key: "icon", className: "mr-3" },
                            "📝"
                          ),
                          "Journaling",
                        ]
                      ),
                      React.createElement(
                        "button",
                        {
                          key: "scribble",
                          onClick: () => setCurrentActivity("scribble"),
                          className:
                            "w-full bg-pink-500 hover:bg-pink-600 text-white py-4 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center",
                        },
                        [
                          React.createElement(
                            "span",
                            { key: "icon", className: "mr-3" },
                            "🎨"
                          ),
                          "Scribble & Draw",
                        ]
                      ),
                      React.createElement(
                        "button",
                        {
                          key: "therapist",
                          onClick: () => setCurrentActivity("therapist"),
                          className:
                            "w-full bg-orange-500 hover:bg-orange-600 text-white py-4 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center",
                        },
                        [
                          React.createElement(
                            "span",
                            { key: "icon", className: "mr-3" },
                            "🤖"
                          ),
                          "AI Therapist",
                        ]
                      ),
                    ]
                  ),
                ]
              );
          }
        };

        return React.createElement(
          "div",
          {
            className:
              "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",
          },
          React.createElement(
            "div",
            {
              className:
                "bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",
            },
            [
              // Header
              React.createElement(
                "div",
                {
                  key: "header",
                  className: "bg-orange-500 text-white p-6 text-center",
                },
                [
                  React.createElement(
                    "h2",
                    { key: "title", className: "text-2xl font-bold mb-2" },
                    "🌿 Defocus Mode"
                  ),
                  React.createElement(
                    "p",
                    { key: "subtitle", className: "text-sm opacity-90" },
                    "Take a mindful break"
                  ),
                ]
              ),

              // Content
              React.createElement(
                "div",
                {
                  key: "content",
                  className: "p-6",
                },
                renderActivity()
              ),

              // Footer
              React.createElement(
                "div",
                {
                  key: "footer",
                  className: "px-6 pb-6",
                },
                [
                  currentActivity !== "menu" &&
                    React.createElement(
                      "button",
                      {
                        key: "back",
                        onClick: () => setCurrentActivity("menu"),
                        className:
                          "w-full mb-3 px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors duration-200",
                      },
                      "← Back to Activities"
                    ),
                  React.createElement(
                    "div",
                    {
                      key: "actions",
                      className: "flex justify-between",
                    },
                    [
                      React.createElement(
                        "button",
                        {
                          key: "skip",
                          onClick: onSkip,
                          className:
                            "px-4 py-2 text-sm text-gray-500 hover:text-gray-700 transition-colors duration-200",
                        },
                        "Skip Break"
                      ),
                      React.createElement(
                        "button",
                        {
                          key: "complete",
                          onClick: () => {
                            onComplete();
                            onSkip();
                          },
                          className:
                            "px-6 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors duration-200",
                        },
                        "Complete Break"
                      ),
                    ]
                  ),
                ]
              ),
            ]
          )
        );
      };

      // Break Time Component
      const BreakTime = ({ onComplete, onSkip }) => {
        const [breakType, setBreakType] = useState("micro");
        const [timeLeft, setTimeLeft] = useState(2 * 60); // 2 minutes for micro break
        const [isRunning, setIsRunning] = useState(false);
        const [breakActivities, setBreakActivities] = useState([
          "Take 5 deep breaths",
          "Stretch your arms and shoulders",
          "Look away from the screen for 30 seconds",
          "Walk around for 1 minute",
          "Do some light stretching",
        ]);
        const [currentActivity, setCurrentActivity] = useState(0);

        const breakTypes = {
          micro: { duration: 2 * 60, name: "Micro Break", icon: "☕" },
          short: { duration: 5 * 60, name: "Short Break", icon: "🌿" },
          long: { duration: 15 * 60, name: "Long Break", icon: "🧘" },
        };

        useEffect(() => {
          let interval = null;
          if (isRunning && timeLeft > 0) {
            interval = setInterval(() => {
              setTimeLeft((timeLeft) => timeLeft - 1);
            }, 1000);
          } else if (timeLeft === 0) {
            setIsRunning(false);
            onComplete();
          }
          return () => clearInterval(interval);
        }, [isRunning, timeLeft, onComplete]);

        const startBreak = () => {
          setIsRunning(true);
        };

        const pauseBreak = () => {
          setIsRunning(false);
        };

        const resetBreak = () => {
          setIsRunning(false);
          setTimeLeft(breakTypes[breakType].duration);
        };

        const formatTime = (seconds) => {
          const mins = Math.floor(seconds / 60);
          const secs = seconds % 60;
          return `${mins.toString().padStart(2, "0")}:${secs
            .toString()
            .padStart(2, "0")}`;
        };

        const progress =
          ((breakTypes[breakType].duration - timeLeft) /
            breakTypes[breakType].duration) *
          100;

        return React.createElement(
          "div",
          {
            className:
              "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",
          },
          React.createElement(
            "div",
            {
              className:
                "bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",
            },
            [
              // Header
              React.createElement(
                "div",
                {
                  key: "header",
                  className:
                    "bg-gradient-to-r from-green-500 to-emerald-500 p-6 text-center text-white",
                },
                [
                  React.createElement(
                    "h2",
                    {
                      key: "title",
                      className: "text-2xl font-bold mb-2",
                    },
                    `${breakTypes[breakType].icon} ${breakTypes[breakType].name}`
                  ),
                  React.createElement(
                    "p",
                    {
                      key: "subtitle",
                      className: "text-sm opacity-90",
                    },
                    "Take a moment to recharge"
                  ),
                ]
              ),

              // Break Type Selector
              React.createElement(
                "div",
                {
                  key: "break-selector",
                  className: "p-6 border-b border-gray-200",
                },
                [
                  React.createElement(
                    "h3",
                    {
                      key: "selector-title",
                      className:
                        "text-lg font-semibold text-gray-900 mb-4 text-center",
                    },
                    "Choose Break Type"
                  ),
                  React.createElement(
                    "div",
                    {
                      key: "break-types",
                      className: "grid grid-cols-3 gap-3",
                    },
                    Object.entries(breakTypes).map(([type, config]) =>
                      React.createElement(
                        "button",
                        {
                          key: type,
                          onClick: () => {
                            setBreakType(type);
                            setTimeLeft(config.duration);
                            setIsRunning(false);
                          },
                          className: `p-3 rounded-lg border-2 transition-all duration-200 ${
                            breakType === type
                              ? "border-green-500 bg-green-50 text-green-700"
                              : "border-gray-200 bg-white text-gray-600 hover:border-gray-300"
                          }`,
                        },
                        [
                          React.createElement(
                            "div",
                            { key: "icon", className: "text-2xl mb-1" },
                            config.icon
                          ),
                          React.createElement(
                            "div",
                            { key: "name", className: "text-xs font-medium" },
                            config.name
                          ),
                          React.createElement(
                            "div",
                            {
                              key: "duration",
                              className: "text-xs text-gray-500",
                            },
                            `${Math.floor(config.duration / 60)} min`
                          ),
                        ]
                      )
                    )
                  ),
                ]
              ),

              // Timer Display
              React.createElement(
                "div",
                {
                  key: "timer",
                  className: "p-6 text-center",
                },
                [
                  React.createElement(
                    "div",
                    {
                      key: "time-display",
                      className:
                        "text-6xl font-mono font-bold text-gray-900 mb-4",
                    },
                    formatTime(timeLeft)
                  ),
                  React.createElement(
                    "div",
                    {
                      key: "progress-bar",
                      className: "w-full bg-gray-200 rounded-full h-3 mb-6",
                    },
                    React.createElement("div", {
                      className:
                        "bg-green-500 h-3 rounded-full transition-all duration-1000",
                      style: { width: `${progress}%` },
                    })
                  ),
                ]
              ),

              // Break Activities
              React.createElement(
                "div",
                {
                  key: "activities",
                  className: "p-6 border-t border-gray-200",
                },
                [
                  React.createElement(
                    "h4",
                    {
                      key: "activities-title",
                      className:
                        "text-lg font-semibold text-gray-900 mb-4 text-center",
                    },
                    "💡 Break Activities"
                  ),
                  React.createElement(
                    "div",
                    {
                      key: "current-activity",
                      className:
                        "bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",
                    },
                    [
                      React.createElement(
                        "div",
                        {
                          key: "activity-icon",
                          className: "text-2xl mb-2 text-center",
                        },
                        "🎯"
                      ),
                      React.createElement(
                        "p",
                        {
                          key: "activity-text",
                          className: "text-center text-blue-800 font-medium",
                        },
                        breakActivities[currentActivity]
                      ),
                    ]
                  ),
                  React.createElement(
                    "button",
                    {
                      key: "next-activity",
                      onClick: () =>
                        setCurrentActivity(
                          (prev) => (prev + 1) % breakActivities.length
                        ),
                      className:
                        "w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition-colors duration-200 text-sm font-medium mb-4",
                    },
                    "🔄 Next Activity"
                  ),
                ]
              ),

              // Controls
              React.createElement(
                "div",
                {
                  key: "controls",
                  className: "p-6 bg-gray-50 flex justify-center space-x-4",
                },
                [
                  React.createElement(
                    "button",
                    {
                      key: "skip",
                      onClick: onSkip,
                      className:
                        "px-4 py-2 text-sm text-gray-500 hover:text-gray-700 transition-colors duration-200",
                    },
                    "Skip Break"
                  ),
                  React.createElement(
                    "button",
                    {
                      key: "reset",
                      onClick: resetBreak,
                      className:
                        "px-4 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors duration-200",
                    },
                    "Reset"
                  ),
                  React.createElement(
                    "button",
                    {
                      key: "start-pause",
                      onClick: isRunning ? pauseBreak : startBreak,
                      className: `px-6 py-2 rounded-lg transition-colors duration-200 text-sm font-medium ${
                        isRunning
                          ? "bg-orange-500 hover:bg-orange-600 text-white"
                          : "bg-green-500 hover:bg-green-600 text-white"
                      }`,
                    },
                    isRunning ? "⏸️ Pause" : "▶️ Start"
                  ),
                  React.createElement(
                    "button",
                    {
                      key: "complete",
                      onClick: () => {
                        onComplete();
                        onSkip();
                      },
                      className:
                        "px-6 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors duration-200 text-sm font-medium",
                    },
                    "✅ Complete"
                  ),
                ]
              ),
            ]
          )
        );
      };

      // Welcome Screen Component
      const WelcomeScreen = ({ onStart }) => {
        return React.createElement(
          "div",
          {
            className:
              "fixed inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center z-50",
          },
          [
            React.createElement(
              "div",
              {
                key: "welcome-content",
                className: "text-center max-w-4xl mx-auto px-8 py-12",
              },
              [
                // Main Title
                React.createElement(
                  "div",
                  {
                    key: "title-section",
                    className: "mb-12",
                  },
                  [
                    React.createElement(
                      "h1",
                      {
                        key: "main-title",
                        className:
                          "text-6xl md:text-8xl font-bold text-white mb-6 animate-pulse",
                      },
                      "🎯 Defocus2Focus"
                    ),
                    React.createElement(
                      "h2",
                      {
                        key: "subtitle",
                        className:
                          "text-2xl md:text-4xl font-semibold text-blue-200 mb-8",
                      },
                      "Where Productivity Meets Play"
                    ),
                    React.createElement(
                      "p",
                      {
                        key: "description",
                        className:
                          "text-lg md:text-xl text-gray-300 max-w-2xl mx-auto leading-relaxed",
                      },
                      "Transform your productivity journey with our gamified approach to focus and mindful breaks. Turn procrastination into play!"
                    ),
                  ]
                ),

                // Feature Highlights
                React.createElement(
                  "div",
                  {
                    key: "features-section",
                    className: "grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",
                  },
                  [
                    React.createElement(
                      "div",
                      {
                        key: "focus-feature",
                        className:
                          "bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-6 border border-white border-opacity-20 hover:bg-opacity-20 transition-all duration-300",
                      },
                      [
                        React.createElement(
                          "div",
                          {
                            key: "focus-icon",
                            className: "text-4xl mb-4",
                          },
                          "🎯"
                        ),
                        React.createElement(
                          "h3",
                          {
                            key: "focus-title",
                            className: "text-xl font-semibold text-white mb-2",
                          },
                          "Focus Mode"
                        ),
                        React.createElement(
                          "p",
                          {
                            key: "focus-desc",
                            className: "text-gray-300 text-sm",
                          },
                          "Deep work sessions with Pomodoro timers and progress tracking"
                        ),
                      ]
                    ),
                    React.createElement(
                      "div",
                      {
                        key: "defocus-feature",
                        className:
                          "bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-6 border border-white border-opacity-20 hover:bg-opacity-20 transition-all duration-300",
                      },
                      [
                        React.createElement(
                          "div",
                          {
                            key: "defocus-icon",
                            className: "text-4xl mb-4",
                          },
                          "🌿"
                        ),
                        React.createElement(
                          "h3",
                          {
                            key: "defocus-title",
                            className: "text-xl font-semibold text-white mb-2",
                          },
                          "Defocus Mode"
                        ),
                        React.createElement(
                          "p",
                          {
                            key: "defocus-desc",
                            className: "text-gray-300 text-sm",
                          },
                          "Mindful breaks with mini-games and relaxation activities"
                        ),
                      ]
                    ),
                    React.createElement(
                      "div",
                      {
                        key: "rewards-feature",
                        className:
                          "bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-6 border border-white border-opacity-20 hover:bg-opacity-20 transition-all duration-300",
                      },
                      [
                        React.createElement(
                          "div",
                          {
                            key: "rewards-icon",
                            className: "text-4xl mb-4",
                          },
                          "🏆"
                        ),
                        React.createElement(
                          "h3",
                          {
                            key: "rewards-title",
                            className: "text-xl font-semibold text-white mb-2",
                          },
                          "Rewards & Progress"
                        ),
                        React.createElement(
                          "p",
                          {
                            key: "rewards-desc",
                            className: "text-gray-300 text-sm",
                          },
                          "Earn energy points and unlock achievements as you grow"
                        ),
                      ]
                    ),
                  ]
                ),

                // Start Button
                React.createElement(
                  "div",
                  {
                    key: "start-section",
                    className: "mb-8",
                  },
                  [
                    React.createElement(
                      "button",
                      {
                        key: "start-button",
                        onClick: onStart,
                        className:
                          "bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-bold py-4 px-12 rounded-full text-xl transition-all duration-300 transform hover:scale-105 hover:shadow-2xl shadow-lg",
                      },
                      [
                        React.createElement(
                          "span",
                          {
                            key: "start-icon",
                            className: "mr-3",
                          },
                          "🚀"
                        ),
                        "Start Your Journey",
                      ]
                    ),
                  ]
                ),

                // Additional Info
                React.createElement(
                  "div",
                  {
                    key: "info-section",
                    className: "text-center",
                  },
                  [
                    React.createElement(
                      "p",
                      {
                        key: "info-text",
                        className: "text-gray-400 text-sm",
                      },
                      "Join thousands of users who have transformed their productivity"
                    ),
                    React.createElement(
                      "div",
                      {
                        key: "stats",
                        className:
                          "flex justify-center space-x-8 mt-4 text-gray-400 text-sm",
                      },
                      [
                        React.createElement(
                          "span",
                          { key: "stat1" },
                          "✨ Gamified Experience"
                        ),
                        React.createElement(
                          "span",
                          { key: "stat2" },
                          "🎵 Background Music"
                        ),
                        React.createElement(
                          "span",
                          { key: "stat3" },
                          "📊 Progress Tracking"
                        ),
                      ]
                    ),
                  ]
                ),
              ]
            ),
          ]
        );
      };

      const OnboardingTutorial = ({ onComplete, onSkip }) => {
        const [currentStep, setCurrentStep] = useState(0);
        const [isVisible, setIsVisible] = useState(true);
        const [animationClass, setAnimationClass] = useState("slide-in");
        const [isAnimating, setIsAnimating] = useState(false);
        const [theme, setTheme] = useState("auto");

        // Theme detection and management
        useEffect(() => {
          const savedTheme =
            localStorage.getItem("defocus2focus_theme") || "auto";
          setTheme(savedTheme);

          const applyTheme = (themeMode) => {
            if (
              themeMode === "dark" ||
              (themeMode === "auto" &&
                window.matchMedia("(prefers-color-scheme: dark)").matches)
            ) {
              document.documentElement.classList.add("dark");
            } else {
              document.documentElement.classList.remove("dark");
            }
          };

          applyTheme(savedTheme);

          // Listen for system theme changes
          const mediaQuery = window.matchMedia("(prefers-color-scheme: dark)");
          const handleChange = () => {
            if (savedTheme === "auto") {
              applyTheme("auto");
            }
          };

          mediaQuery.addEventListener("change", handleChange);
          return () => mediaQuery.removeEventListener("change", handleChange);
        }, []);

        const steps = [
          {
            id: "welcome",
            title: "Welcome to Defocus2Focus! 🎯",
            subtitle: "Where Productivity Meets Play",
            description:
              "Transform your productivity journey with our gamified approach to focus and mindful breaks. Turn procrastination into play!",
            icon: "🎯",
            illustration: "✨",
            gradient: "from-blue-500 via-purple-500 to-pink-500",
            bgPattern: "🎯✨🎯",
            animation: "bounce",
            color: "blue",
          },
          {
            id: "focus-mode",
            title: "Focus Mode 🎯",
            subtitle: "Deep Work Made Fun",
            description:
              "Set Pomodoro timers, manage tasks, and track your progress while earning energy points and unlocking achievements.",
            icon: "🎯",
            illustration: "⏰",
            gradient: "from-blue-500 to-indigo-600",
            bgPattern: "⏰📊⏰",
            animation: "pulse",
            color: "blue",
            features: [
              "Pomodoro Timer",
              "Task Management",
              "Progress Tracking",
              "Energy Points",
            ],
          },
          {
            id: "defocus-mode",
            title: "Defocus Mode 🌿",
            subtitle: "Mindful Breaks & Recovery",
            description:
              "Take purposeful breaks with mini-games, breathing exercises, journaling, and AI-powered relaxation activities.",
            icon: "🌿",
            illustration: "🧘",
            gradient: "from-orange-500 to-red-500",
            bgPattern: "🌿🎮🌿",
            animation: "float",
            color: "orange",
            features: [
              "Mini Games",
              "Breathing Exercises",
              "Journaling",
              "AI Therapist",
            ],
          },
          {
            id: "gamification",
            title: "Gamification & Community 🏆",
            subtitle: "Compete, Achieve & Grow Together",
            description:
              "Earn badges, climb leaderboards, track your history, and compete with others in a fun, supportive community.",
            icon: "🏆",
            illustration: "⭐",
            gradient: "from-green-500 to-emerald-600",
            bgPattern: "🏆⭐🏆",
            animation: "glow",
            color: "green",
            features: [
              "Leaderboards",
              "Achievement Badges",
              "Session History",
              "Community Rankings",
            ],
          },
        ];

        const nextStep = () => {
          if (isAnimating) return;

          setIsAnimating(true);
          setAnimationClass("slide-out-right");

          setTimeout(() => {
            if (currentStep < steps.length - 1) {
              setCurrentStep(currentStep + 1);
            } else {
              handleComplete();
            }
            setAnimationClass("slide-in-left");
            setTimeout(() => {
              setIsAnimating(false);
            }, 400);
          }, 400);
        };

        const prevStep = () => {
          if (isAnimating || currentStep === 0) return;

          setIsAnimating(true);
          setAnimationClass("slide-out-left");

          setTimeout(() => {
            setCurrentStep(currentStep - 1);
            setAnimationClass("slide-in-right");
            setTimeout(() => {
              setIsAnimating(false);
            }, 400);
          }, 400);
        };

        const goToStep = (stepIndex) => {
          if (isAnimating || stepIndex === currentStep) return;

          setIsAnimating(true);
          const direction =
            stepIndex > currentStep ? "slide-out-right" : "slide-out-left";
          setAnimationClass(direction);

          setTimeout(() => {
            setCurrentStep(stepIndex);
            const newDirection =
              stepIndex > currentStep ? "slide-in-left" : "slide-in-right";
            setAnimationClass(newDirection);
            setTimeout(() => {
              setIsAnimating(false);
            }, 400);
          }, 400);
        };

        const handleComplete = () => {
          setIsVisible(false);
          setTimeout(() => {
            onComplete();
          }, 300);
        };

        const handleSkip = () => {
          setIsVisible(false);
          setTimeout(() => {
            onSkip();
          }, 300);
        };

        const currentStepData = steps[currentStep];
        const isLastStep = currentStep === steps.length - 1;
        const isFirstStep = currentStep === 0;

        if (!isVisible) return null;

        return React.createElement(
          "div",
          {
            className:
              "fixed inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 dark:from-gray-900 dark:via-purple-900 dark:to-indigo-900 flex items-center justify-center z-50 p-4",
          },
          React.createElement(
            "div",
            {
              className: `onboarding-card bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-lg w-full mx-4 overflow-hidden transform transition-all duration-500 ease-in-out ${animationClass}`,
            },
            [
              // Header with gradient background
              React.createElement(
                "div",
                {
                  key: "header",
                  className: `relative bg-gradient-to-r ${currentStepData.gradient} p-6 text-white`,
                },
                [
                  // Theme toggle button
                  React.createElement(
                    "div",
                    {
                      key: "theme-toggle",
                      className: "absolute top-4 right-4 flex space-x-2",
                    },
                    [
                      React.createElement(
                        "button",
                        {
                          key: "light-theme",
                          onClick: () => {
                            setTheme("light");
                            localStorage.setItem(
                              "defocus2focus_theme",
                              "light"
                            );
                            document.documentElement.classList.remove("dark");
                          },
                          className: `w-8 h-8 rounded-full transition-all duration-200 ${
                            theme === "light"
                              ? "bg-white bg-opacity-30"
                              : "bg-white bg-opacity-10 hover:bg-opacity-20"
                          }`,
                        },
                        "☀️"
                      ),
                      React.createElement(
                        "button",
                        {
                          key: "dark-theme",
                          onClick: () => {
                            setTheme("dark");
                            localStorage.setItem("defocus2focus_theme", "dark");
                            document.documentElement.classList.add("dark");
                          },
                          className: `w-8 h-8 rounded-full transition-all duration-200 ${
                            theme === "dark"
                              ? "bg-white bg-opacity-30"
                              : "bg-white bg-opacity-10 hover:bg-opacity-20"
                          }`,
                        },
                        "🌙"
                      ),
                      React.createElement(
                        "button",
                        {
                          key: "auto-theme",
                          onClick: () => {
                            setTheme("auto");
                            localStorage.setItem("defocus2focus_theme", "auto");
                            const isDark = window.matchMedia(
                              "(prefers-color-scheme: dark)"
                            ).matches;
                            if (isDark) {
                              document.documentElement.classList.add("dark");
                            } else {
                              document.documentElement.classList.remove("dark");
                            }
                          },
                          className: `w-8 h-8 rounded-full transition-all duration-200 ${
                            theme === "auto"
                              ? "bg-white bg-opacity-30"
                              : "bg-white bg-opacity-10 hover:bg-opacity-20"
                          }`,
                        },
                        "🔄"
                      ),
                    ]
                  ),
                  React.createElement(
                    "div",
                    {
                      key: "progress-bar",
                      className:
                        "h-3 bg-white bg-opacity-30 rounded-full overflow-hidden mb-4",
                      style: {
                        width: "100%",
                      },
                    },
                    React.createElement("div", {
                      className:
                        "h-full bg-white rounded-full transition-all duration-500 ease-out",
                      style: {
                        width: `${((currentStep + 1) / steps.length) * 100}%`,
                      },
                    })
                  ),
                  React.createElement(
                    "button",
                    {
                      key: "skip-button",
                      onClick: handleSkip,
                      className:
                        "absolute top-4 right-4 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-all duration-200 text-sm font-medium bg-white dark:bg-gray-800 px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700",
                    },
                    "Skip"
                  ),
                  React.createElement(
                    "h2",
                    {
                      key: "header-title",
                      className: "text-2xl font-bold mb-2 text-center",
                    },
                    currentStepData.title
                  ),
                  React.createElement(
                    "p",
                    {
                      key: "header-subtitle",
                      className:
                        "text-white text-opacity-90 text-center text-sm",
                    },
                    currentStepData.subtitle
                  ),
                ]
              ),

              // Content
              React.createElement(
                "div",
                { key: "content", className: "p-8 text-center" },
                [
                  // Animated Illustration
                  React.createElement(
                    "div",
                    { key: "illustration", className: "mb-8" },
                    [
                      React.createElement(
                        "div",
                        {
                          key: "main-icon",
                          className: `text-8xl mb-4 ${currentStepData.animation}-animation`,
                        },
                        currentStepData.icon
                      ),
                      React.createElement(
                        "div",
                        {
                          key: "bg-pattern",
                          className: "text-2xl opacity-20 mb-4",
                        },
                        currentStepData.bgPattern
                      ),
                    ]
                  ),

                  // Description
                  React.createElement(
                    "p",
                    {
                      key: "description",
                      className:
                        "text-gray-700 dark:text-gray-300 mb-8 leading-relaxed text-lg",
                    },
                    currentStepData.description
                  ),

                  // Enhanced Features List
                  currentStepData.features &&
                    React.createElement(
                      "div",
                      { key: "features", className: "mb-8" },
                      [
                        React.createElement(
                          "h4",
                          {
                            key: "features-title",
                            className:
                              "text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-4 text-center",
                          },
                          "✨ Key Features"
                        ),
                        React.createElement(
                          "div",
                          {
                            key: "features-grid",
                            className: "grid grid-cols-2 gap-3",
                          },
                          currentStepData.features.map((feature, index) =>
                            React.createElement(
                              "div",
                              {
                                key: index,
                                className: `feature-badge px-4 py-3 rounded-xl text-sm font-medium text-center ${
                                  currentStepData.color === "blue"
                                    ? "bg-blue-50 text-blue-800 border border-blue-200"
                                    : currentStepData.color === "orange"
                                    ? "bg-orange-50 text-orange-800 border border-orange-200"
                                    : currentStepData.color === "purple"
                                    ? "bg-purple-50 text-purple-800 border border-purple-200"
                                    : "bg-green-50 text-green-800 border border-green-200"
                                }`,
                              },
                              feature
                            )
                          )
                        ),
                      ]
                    ),

                  // Enhanced Progress Dots (Clickable)
                  React.createElement(
                    "div",
                    {
                      key: "progress-dots",
                      className: "flex justify-center space-x-3 mb-8",
                    },
                    steps.map((_, index) =>
                      React.createElement("button", {
                        key: index,
                        onClick: () => goToStep(index),
                        disabled: isAnimating,
                        className: `w-4 h-4 rounded-full transition-all duration-300 cursor-pointer hover:scale-110 ${
                          index === currentStep
                            ? currentStepData.color === "blue"
                              ? "bg-blue-500 scale-125 shadow-lg"
                              : currentStepData.color === "orange"
                              ? "bg-orange-500 scale-125 shadow-lg"
                              : currentStepData.color === "purple"
                              ? "bg-purple-500 scale-125 shadow-lg"
                              : "bg-green-500 scale-125 shadow-lg"
                            : "bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500"
                        } ${isAnimating ? "cursor-not-allowed" : ""}`,
                      })
                    )
                  ),
                ]
              ),

              // Footer
              React.createElement(
                "div",
                { key: "footer", className: "px-8 pb-8" },
                [
                  React.createElement(
                    "div",
                    {
                      key: "footer-buttons",
                      className: "flex justify-between items-center",
                    },
                    [
                      // Back Button
                      React.createElement(
                        "button",
                        {
                          key: "back-button",
                          onClick: prevStep,
                          disabled: isFirstStep || isAnimating,
                          className: `px-6 py-3 rounded-xl font-medium transition-all duration-200 flex items-center space-x-2 ${
                            isFirstStep || isAnimating
                              ? "text-gray-300 dark:text-gray-600 cursor-not-allowed"
                              : "text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 hover:scale-105"
                          }`,
                        },
                        [
                          React.createElement(
                            "span",
                            { key: "back-icon" },
                            "←"
                          ),
                          React.createElement(
                            "span",
                            { key: "back-text" },
                            "Back"
                          ),
                        ]
                      ),

                      // Skip Button (Center)
                      React.createElement(
                        "button",
                        {
                          key: "skip-button-footer",
                          onClick: handleSkip,
                          disabled: isAnimating,
                          className: `px-4 py-2 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-all duration-200 font-medium ${
                            isAnimating ? "opacity-50 cursor-not-allowed" : ""
                          }`,
                        },
                        "Skip Tutorial"
                      ),

                      // Next/Complete Button
                      React.createElement(
                        "button",
                        {
                          key: "next-button",
                          onClick: nextStep,
                          disabled: isAnimating,
                          className: `px-8 py-3 rounded-xl font-medium text-white transition-all duration-200 transform hover:scale-105 flex items-center space-x-2 ${
                            currentStepData.color === "blue"
                              ? "bg-blue-500 hover:bg-blue-600"
                              : currentStepData.color === "orange"
                              ? "bg-orange-500 hover:bg-orange-600"
                              : currentStepData.color === "purple"
                              ? "bg-purple-500 hover:bg-purple-600"
                              : "bg-green-500 hover:bg-green-600"
                          } ${
                            isAnimating ? "opacity-50 cursor-not-allowed" : ""
                          }`,
                        },
                        [
                          React.createElement(
                            "span",
                            { key: "next-text" },
                            isLastStep ? "Start My Journey" : "Next"
                          ),
                          React.createElement(
                            "span",
                            { key: "next-icon" },
                            isLastStep ? "🚀" : "→"
                          ),
                        ]
                      ),
                    ]
                  ),
                ]
              ),
            ]
          )
        );
      };

      // History Component
      const HistoryScreen = ({ history, onClose }) => {
        const [filter, setFilter] = useState("all");
        const [sortBy, setSortBy] = useState("date");
        const [sortOrder, setSortOrder] = useState("desc");

        const filteredHistory = history.filter((session) => {
          if (filter === "all") return true;
          return session.feature === filter;
        });

        const sortedHistory = [...filteredHistory].sort((a, b) => {
          let aValue, bValue;
          switch (sortBy) {
            case "date":
              aValue = new Date(a.date);
              bValue = new Date(b.date);
              break;
            case "duration":
              aValue = a.duration;
              bValue = b.duration;
              break;
            case "points":
              aValue = a.points;
              bValue = b.points;
              break;
            default:
              aValue = a.feature;
              bValue = b.feature;
          }

          if (sortOrder === "asc") {
            return aValue > bValue ? 1 : -1;
          } else {
            return aValue < bValue ? 1 : -1;
          }
        });

        const exportHistory = () => {
          const dataStr = JSON.stringify(sortedHistory, null, 2);
          const dataBlob = new Blob([dataStr], { type: "application/json" });
          const url = URL.createObjectURL(dataBlob);
          const link = document.createElement("a");
          link.href = url;
          link.download = `defocus2focus-history-${
            new Date().toISOString().split("T")[0]
          }.json`;
          link.click();
          URL.revokeObjectURL(url);
        };

        return React.createElement(
          "div",
          {
            className:
              "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",
          },
          React.createElement(
            "div",
            {
              className:
                "bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",
            },
            [
              // Header
              React.createElement(
                "div",
                {
                  key: "header",
                  className:
                    "bg-gradient-to-r from-purple-500 to-pink-500 p-6 text-white",
                },
                [
                  React.createElement(
                    "div",
                    {
                      key: "header-content",
                      className: "flex justify-between items-center",
                    },
                    [
                      React.createElement(
                        "h2",
                        {
                          key: "title",
                          className: "text-2xl font-bold",
                        },
                        "📊 Session History"
                      ),
                      React.createElement(
                        "button",
                        {
                          key: "close-btn",
                          onClick: onClose,
                          className: "text-white hover:text-gray-200 text-2xl",
                        },
                        "×"
                      ),
                    ]
                  ),
                ]
              ),

              // Filters and Controls
              React.createElement(
                "div",
                {
                  key: "controls",
                  className:
                    "p-6 border-b border-gray-200 dark:border-gray-700",
                },
                [
                  React.createElement(
                    "div",
                    {
                      key: "filters",
                      className: "flex flex-wrap gap-4 mb-4",
                    },
                    [
                      React.createElement(
                        "select",
                        {
                          key: "filter-select",
                          value: filter,
                          onChange: (e) => setFilter(e.target.value),
                          className:
                            "px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",
                        },
                        [
                          React.createElement(
                            "option",
                            { key: "all", value: "all" },
                            "All Features"
                          ),
                          React.createElement(
                            "option",
                            { key: "focus", value: "focus" },
                            "Focus Mode"
                          ),
                          React.createElement(
                            "option",
                            { key: "defocus", value: "defocus" },
                            "Defocus Mode"
                          ),
                          React.createElement(
                            "option",
                            { key: "journaling", value: "journaling" },
                            "Journaling"
                          ),
                          React.createElement(
                            "option",
                            { key: "games", value: "games" },
                            "Games"
                          ),
                        ]
                      ),
                      React.createElement(
                        "select",
                        {
                          key: "sort-select",
                          value: sortBy,
                          onChange: (e) => setSortBy(e.target.value),
                          className:
                            "px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",
                        },
                        [
                          React.createElement(
                            "option",
                            { key: "date", value: "date" },
                            "Sort by Date"
                          ),
                          React.createElement(
                            "option",
                            { key: "duration", value: "duration" },
                            "Sort by Duration"
                          ),
                          React.createElement(
                            "option",
                            { key: "points", value: "points" },
                            "Sort by Points"
                          ),
                          React.createElement(
                            "option",
                            { key: "feature", value: "feature" },
                            "Sort by Feature"
                          ),
                        ]
                      ),
                      React.createElement(
                        "button",
                        {
                          key: "sort-order",
                          onClick: () =>
                            setSortOrder(sortOrder === "asc" ? "desc" : "asc"),
                          className:
                            "px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",
                        },
                        sortOrder === "asc" ? "↑ Ascending" : "↓ Descending"
                      ),
                      React.createElement(
                        "button",
                        {
                          key: "export-btn",
                          onClick: exportHistory,
                          className:
                            "px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",
                        },
                        "📤 Export"
                      ),
                    ]
                  ),
                ]
              ),

              // History List
              React.createElement(
                "div",
                {
                  key: "history-list",
                  className: "p-6 max-h-96 overflow-y-auto",
                },
                sortedHistory.length === 0
                  ? React.createElement(
                      "div",
                      {
                        key: "empty-state",
                        className:
                          "text-center py-12 text-gray-500 dark:text-gray-400",
                      },
                      [
                        React.createElement(
                          "div",
                          {
                            key: "empty-icon",
                            className: "text-6xl mb-4",
                          },
                          "📝"
                        ),
                        React.createElement(
                          "p",
                          {
                            key: "empty-text",
                            className: "text-lg",
                          },
                          "No sessions recorded yet. Start using the app to build your history!"
                        ),
                      ]
                    )
                  : sortedHistory.map((session) =>
                      React.createElement(
                        "div",
                        {
                          key: session.id,
                          className:
                            "bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-4 border border-gray-200 dark:border-gray-600",
                        },
                        [
                          React.createElement(
                            "div",
                            {
                              key: "session-header",
                              className:
                                "flex justify-between items-start mb-2",
                            },
                            [
                              React.createElement(
                                "div",
                                {
                                  key: "session-info",
                                  className: "flex items-center space-x-3",
                                },
                                [
                                  React.createElement(
                                    "span",
                                    {
                                      key: "feature-icon",
                                      className: "text-2xl",
                                    },
                                    session.feature === "focus"
                                      ? "🎯"
                                      : session.feature === "defocus"
                                      ? "🌿"
                                      : session.feature === "journaling"
                                      ? "📝"
                                      : "🎮"
                                  ),
                                  React.createElement(
                                    "div",
                                    {
                                      key: "session-details",
                                    },
                                    [
                                      React.createElement(
                                        "h3",
                                        {
                                          key: "session-title",
                                          className:
                                            "font-semibold text-gray-900 dark:text-white capitalize",
                                        },
                                        `${session.feature} Session`
                                      ),
                                      React.createElement(
                                        "p",
                                        {
                                          key: "session-date",
                                          className:
                                            "text-sm text-gray-600 dark:text-gray-400",
                                        },
                                        new Date(session.date).toLocaleString()
                                      ),
                                    ]
                                  ),
                                ]
                              ),
                              React.createElement(
                                "div",
                                {
                                  key: "session-stats",
                                  className: "text-right",
                                },
                                [
                                  React.createElement(
                                    "div",
                                    {
                                      key: "points",
                                      className:
                                        "text-lg font-bold text-green-600 dark:text-green-400",
                                    },
                                    `+${session.points} pts`
                                  ),
                                  React.createElement(
                                    "div",
                                    {
                                      key: "duration",
                                      className:
                                        "text-sm text-gray-600 dark:text-gray-400",
                                    },
                                    `${session.duration} min`
                                  ),
                                ]
                              ),
                            ]
                          ),
                          React.createElement(
                            "div",
                            {
                              key: "session-outcome",
                              className:
                                "text-sm text-gray-700 dark:text-gray-300",
                            },
                            session.outcome
                          ),
                        ]
                      )
                    )
              ),
            ]
          )
        );
      };

      // Leaderboards Component
      const LeaderboardsScreen = ({ leaderboards, username, onClose }) => {
        const [activeTab, setActiveTab] = useState("global");

        const tabs = [
          { id: "global", name: "Global", icon: "👑" },
          { id: "focus", name: "Focus", icon: "🎯" },
          { id: "defocus", name: "Defocus", icon: "🌿" },
          { id: "journaling", name: "Journaling", icon: "📝" },
          { id: "games", name: "Games", icon: "🎮" },
        ];

        const getCurrentUserRank = (board) => {
          const userEntry = board.find((entry) => entry.username === username);
          return userEntry ? board.indexOf(userEntry) + 1 : null;
        };

        const getCurrentUserScore = (board) => {
          const userEntry = board.find((entry) => entry.username === username);
          return userEntry ? userEntry.score : 0;
        };

        return React.createElement(
          "div",
          {
            className:
              "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",
          },
          React.createElement(
            "div",
            {
              className:
                "bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",
            },
            [
              // Header
              React.createElement(
                "div",
                {
                  key: "header",
                  className:
                    "bg-gradient-to-r from-yellow-500 to-orange-500 p-6 text-white",
                },
                [
                  React.createElement(
                    "div",
                    {
                      key: "header-content",
                      className: "flex justify-between items-center",
                    },
                    [
                      React.createElement(
                        "h2",
                        {
                          key: "title",
                          className: "text-2xl font-bold",
                        },
                        "🏆 Leaderboards"
                      ),
                      React.createElement(
                        "button",
                        {
                          key: "close-btn",
                          onClick: onClose,
                          className: "text-white hover:text-gray-200 text-2xl",
                        },
                        "×"
                      ),
                    ]
                  ),
                ]
              ),

              // Tabs
              React.createElement(
                "div",
                {
                  key: "tabs",
                  className: "border-b border-gray-200 dark:border-gray-700",
                },
                React.createElement(
                  "div",
                  {
                    key: "tab-list",
                    className: "flex overflow-x-auto",
                  },
                  tabs.map((tab) =>
                    React.createElement(
                      "button",
                      {
                        key: tab.id,
                        onClick: () => setActiveTab(tab.id),
                        className: `px-6 py-4 text-sm font-medium border-b-2 transition-colors ${
                          activeTab === tab.id
                            ? "border-yellow-500 text-yellow-600 dark:text-yellow-400"
                            : "border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"
                        }`,
                      },
                      [
                        React.createElement(
                          "span",
                          {
                            key: "tab-icon",
                            className: "mr-2",
                          },
                          tab.icon
                        ),
                        tab.name,
                      ]
                    )
                  )
                )
              ),

              // Leaderboard Content
              React.createElement(
                "div",
                {
                  key: "content",
                  className: "p-6 max-h-96 overflow-y-auto",
                },
                [
                  // Current User Stats
                  React.createElement(
                    "div",
                    {
                      key: "user-stats",
                      className:
                        "bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900 dark:to-purple-900 rounded-lg p-4 mb-6",
                    },
                    [
                      React.createElement(
                        "h3",
                        {
                          key: "user-title",
                          className:
                            "text-lg font-semibold text-gray-900 dark:text-white mb-2",
                        },
                        `Your ${
                          tabs.find((t) => t.id === activeTab)?.name
                        } Stats`
                      ),
                      React.createElement(
                        "div",
                        {
                          key: "user-info",
                          className: "flex justify-between items-center",
                        },
                        [
                          React.createElement(
                            "div",
                            {
                              key: "user-rank",
                              className: "text-center",
                            },
                            [
                              React.createElement(
                                "div",
                                {
                                  key: "rank-label",
                                  className:
                                    "text-sm text-gray-600 dark:text-gray-400",
                                },
                                "Rank"
                              ),
                              React.createElement(
                                "div",
                                {
                                  key: "rank-value",
                                  className:
                                    "text-2xl font-bold text-blue-600 dark:text-blue-400",
                                },
                                getCurrentUserRank(leaderboards[activeTab]) ||
                                  "—"
                              ),
                            ]
                          ),
                          React.createElement(
                            "div",
                            {
                              key: "user-score",
                              className: "text-center",
                            },
                            [
                              React.createElement(
                                "div",
                                {
                                  key: "score-label",
                                  className:
                                    "text-sm text-gray-600 dark:text-gray-400",
                                },
                                "Score"
                              ),
                              React.createElement(
                                "div",
                                {
                                  key: "score-value",
                                  className:
                                    "text-2xl font-bold text-green-600 dark:text-green-400",
                                },
                                getCurrentUserScore(leaderboards[activeTab])
                              ),
                            ]
                          ),
                        ]
                      ),
                    ]
                  ),

                  // Leaderboard List
                  leaderboards[activeTab]?.length === 0
                    ? React.createElement(
                        "div",
                        {
                          key: "empty-state",
                          className:
                            "text-center py-12 text-gray-500 dark:text-gray-400",
                        },
                        [
                          React.createElement(
                            "div",
                            {
                              key: "empty-icon",
                              className: "text-6xl mb-4",
                            },
                            "🏆"
                          ),
                          React.createElement(
                            "p",
                            {
                              key: "empty-text",
                              className: "text-lg",
                            },
                            "No rankings yet. Be the first to compete!"
                          ),
                        ]
                      )
                    : leaderboards[activeTab]?.map((entry, index) =>
                        React.createElement(
                          "div",
                          {
                            key: entry.username,
                            className: `flex items-center justify-between p-4 rounded-lg mb-3 transition-all ${
                              entry.username === username
                                ? "bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900 dark:to-orange-900 border-2 border-yellow-300 dark:border-yellow-600"
                                : "bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600"
                            }`,
                          },
                          [
                            React.createElement(
                              "div",
                              {
                                key: "rank-info",
                                className: "flex items-center space-x-4",
                              },
                              [
                                React.createElement(
                                  "div",
                                  {
                                    key: "rank",
                                    className: `w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${
                                      index === 0
                                        ? "bg-yellow-500 text-white"
                                        : index === 1
                                        ? "bg-gray-400 text-white"
                                        : index === 2
                                        ? "bg-orange-600 text-white"
                                        : "bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"
                                    }`,
                                  },
                                  index + 1
                                ),
                                React.createElement(
                                  "span",
                                  {
                                    key: "badge",
                                    className: "text-2xl",
                                  },
                                  entry.badge
                                ),
                                React.createElement(
                                  "div",
                                  {
                                    key: "user-info",
                                  },
                                  [
                                    React.createElement(
                                      "div",
                                      {
                                        key: "username",
                                        className: `font-semibold ${
                                          entry.username === username
                                            ? "text-yellow-800 dark:text-yellow-200"
                                            : "text-gray-900 dark:text-white"
                                        }`,
                                      },
                                      entry.username
                                    ),
                                    React.createElement(
                                      "div",
                                      {
                                        key: "score",
                                        className:
                                          "text-sm text-gray-600 dark:text-gray-400",
                                      },
                                      `${entry.score} points`
                                    ),
                                  ]
                                ),
                              ]
                            ),
                            React.createElement(
                              "div",
                              {
                                key: "medal",
                                className: "text-3xl",
                              },
                              index === 0
                                ? "🥇"
                                : index === 1
                                ? "🥈"
                                : index === 2
                                ? "🥉"
                                : "🏅"
                            ),
                          ]
                        )
                      ),
                ]
              ),
            ]
          )
        );
      };

      // Analytics Dashboard Component
      const AnalyticsDashboard = ({
        user = { name: "Paridhi", level: 12 },
        onBack,
      }) => {
        const [activeTab, setActiveTab] = useState("home");
        const [isDarkMode, setIsDarkMode] = useState(false);

        useEffect(() => {
          // Check for saved theme preference
          const savedTheme = localStorage.getItem("defocus2focus_theme");
          if (savedTheme === "dark") {
            setIsDarkMode(true);
            document.documentElement.classList.add("dark");
          }
        }, []);

        const toggleDarkMode = () => {
          const newMode = !isDarkMode;
          setIsDarkMode(newMode);

          if (newMode) {
            document.documentElement.classList.add("dark");
            localStorage.setItem("defocus2focus_theme", "dark");
          } else {
            document.documentElement.classList.remove("dark");
            localStorage.setItem("defocus2focus_theme", "light");
          }
        };

        // Reusable Card Component
        const Card = ({ children, className = "", ...props }) =>
          React.createElement(
            "div",
            {
              className: `bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 p-6 transition-all duration-300 hover:shadow-xl ${className}`,
              ...props,
            },
            children
          );

        // Sidebar Component
        const Sidebar = ({ activeTab, setActiveTab, user }) => {
          const navItems = [
            { id: "home", icon: "🏠", label: "Home" },
            { id: "journal", icon: "📓", label: "Journal" },
            { id: "games", icon: "🎮", label: "Games" },
            { id: "ai", icon: "🤖", label: "AI Therapist" },
            { id: "leaderboard", icon: "🏆", label: "Leaderboard" },
            { id: "settings", icon: "⚙️", label: "Settings" },
          ];

          return React.createElement(
            "div",
            {
              className:
                "w-64 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 flex flex-col h-screen",
            },
            [
              // Logo
              React.createElement(
                "div",
                {
                  key: "logo",
                  className:
                    "p-6 border-b border-gray-200 dark:border-gray-700",
                },
                React.createElement(
                  "h1",
                  {
                    className:
                      "text-2xl font-bold text-gray-900 dark:text-white",
                  },
                  "🎯 Defocus2Focus"
                )
              ),

              // Navigation
              React.createElement(
                "nav",
                {
                  key: "nav",
                  className: "flex-1 p-4",
                },
                React.createElement(
                  "ul",
                  {
                    className: "space-y-2",
                  },
                  navItems.map((item) =>
                    React.createElement(
                      "li",
                      { key: item.id },
                      React.createElement(
                        "button",
                        {
                          onClick: () => setActiveTab(item.id),
                          className: `w-full flex items-center px-4 py-3 rounded-xl transition-all duration-200 ${
                            activeTab === item.id
                              ? "bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400"
                              : "text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"
                          }`,
                        },
                        [
                          React.createElement(
                            "span",
                            { key: "icon", className: "mr-3 text-lg" },
                            item.icon
                          ),
                          React.createElement(
                            "span",
                            { key: "label", className: "font-medium" },
                            item.label
                          ),
                        ]
                      )
                    )
                  )
                )
              ),

              // Profile
              React.createElement(
                "div",
                {
                  key: "profile",
                  className:
                    "p-4 border-t border-gray-200 dark:border-gray-700",
                },
                React.createElement(
                  "div",
                  {
                    className: "flex items-center space-x-3",
                  },
                  [
                    React.createElement(
                      "div",
                      {
                        key: "avatar",
                        className:
                          "w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center",
                      },
                      React.createElement(
                        "span",
                        {
                          className: "text-white font-semibold text-sm",
                        },
                        user.name.charAt(0).toUpperCase()
                      )
                    ),
                    React.createElement("div", { key: "info" }, [
                      React.createElement(
                        "p",
                        {
                          key: "name",
                          className:
                            "font-medium text-gray-900 dark:text-white",
                        },
                        user.name
                      ),
                      React.createElement(
                        "p",
                        {
                          key: "level",
                          className: "text-sm text-gray-500 dark:text-gray-400",
                        },
                        `Level ${user.level}`
                      ),
                    ]),
                  ]
                )
              ),
            ]
          );
        };

        // Top Bar Component
        const TopBar = ({ user }) => {
          const [searchQuery, setSearchQuery] = useState("");

          return React.createElement(
            "div",
            {
              className:
                "bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",
            },
            [
              React.createElement("div", { key: "greeting" }, [
                React.createElement(
                  "h2",
                  {
                    key: "title",
                    className:
                      "text-2xl font-bold text-gray-900 dark:text-white",
                  },
                  `Hi ${user.name} 👋`
                ),
                React.createElement(
                  "p",
                  {
                    key: "subtitle",
                    className: "text-gray-600 dark:text-gray-400",
                  },
                  "Here's your focus report"
                ),
              ]),

              React.createElement(
                "div",
                {
                  key: "actions",
                  className: "flex items-center space-x-4",
                },
                [
                  // Back Button
                  onBack &&
                    React.createElement(
                      "button",
                      {
                        key: "back",
                        onClick: onBack,
                        className:
                          "flex items-center space-x-2 px-3 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",
                      },
                      [
                        React.createElement(
                          "svg",
                          {
                            key: "icon",
                            className: "w-5 h-5",
                            fill: "none",
                            stroke: "currentColor",
                            viewBox: "0 0 24 24",
                          },
                          React.createElement("path", {
                            strokeLinecap: "round",
                            strokeLinejoin: "round",
                            strokeWidth: 2,
                            d: "M15 19l-7-7 7-7",
                          })
                        ),
                        React.createElement("span", { key: "text" }, "Back"),
                      ]
                    ),

                  // Search Bar
                  React.createElement(
                    "div",
                    {
                      key: "search",
                      className: "relative",
                    },
                    [
                      React.createElement(
                        "svg",
                        {
                          key: "search-icon",
                          className:
                            "absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",
                          fill: "none",
                          stroke: "currentColor",
                          viewBox: "0 0 24 24",
                        },
                        React.createElement("path", {
                          strokeLinecap: "round",
                          strokeLinejoin: "round",
                          strokeWidth: 2,
                          d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",
                        })
                      ),
                      React.createElement("input", {
                        key: "search-input",
                        type: "text",
                        placeholder: "Search...",
                        value: searchQuery,
                        onChange: (e) => setSearchQuery(e.target.value),
                        className:
                          "pl-10 pr-4 py-2 w-64 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                      }),
                    ]
                  ),

                  // Notifications
                  React.createElement(
                    "button",
                    {
                      key: "notifications",
                      className:
                        "relative p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",
                    },
                    [
                      React.createElement(
                        "svg",
                        {
                          key: "bell-icon",
                          className: "w-5 h-5",
                          fill: "none",
                          stroke: "currentColor",
                          viewBox: "0 0 24 24",
                        },
                        React.createElement("path", {
                          strokeLinecap: "round",
                          strokeLinejoin: "round",
                          strokeWidth: 2,
                          d: "M15 17h5l-5 5v-5zM4.828 7l2.586 2.586a2 2 0 002.828 0L12.828 7H4.828z",
                        })
                      ),
                      React.createElement("span", {
                        key: "notification-dot",
                        className:
                          "absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full",
                      }),
                    ]
                  ),

                  // New Goal Button
                  React.createElement(
                    "button",
                    {
                      key: "new-goal",
                      className:
                        "flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl transition-colors",
                    },
                    [
                      React.createElement(
                        "svg",
                        {
                          key: "plus-icon",
                          className: "w-5 h-5",
                          fill: "none",
                          stroke: "currentColor",
                          viewBox: "0 0 24 24",
                        },
                        React.createElement("path", {
                          strokeLinecap: "round",
                          strokeLinejoin: "round",
                          strokeWidth: 2,
                          d: "M12 6v6m0 0v6m0-6h6m-6 0H6",
                        })
                      ),
                      React.createElement("span", { key: "text" }, "New Goal"),
                    ]
                  ),
                ]
              ),
            ]
          );
        };

        // Focus Progress Card
        const FocusProgressCard = () => {
          const progress = 75; // 3/4 sessions completed

          return React.createElement(
            Card,
            {
              className:
                "bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20",
            },
            [
              React.createElement(
                "div",
                {
                  key: "header",
                  className: "flex items-center justify-between mb-4",
                },
                [
                  React.createElement(
                    "h3",
                    {
                      key: "title",
                      className:
                        "text-lg font-semibold text-gray-900 dark:text-white",
                    },
                    "Focus Progress"
                  ),
                  React.createElement(
                    "span",
                    { key: "icon", className: "text-2xl" },
                    "🎯"
                  ),
                ]
              ),

              React.createElement(
                "div",
                {
                  key: "content",
                  className: "flex items-center space-x-6",
                },
                [
                  React.createElement(
                    "div",
                    {
                      key: "chart",
                      className: "relative",
                    },
                    React.createElement(
                      "div",
                      {
                        className:
                          "w-24 h-24 rounded-full border-8 border-gray-200 dark:border-gray-700 flex items-center justify-center",
                      },
                      [
                        React.createElement("div", {
                          key: "progress-ring",
                          className:
                            "absolute inset-0 rounded-full border-8 border-blue-600 border-t-transparent transform -rotate-90",
                          style: {
                            background: `conic-gradient(from 0deg, #3b82f6 0deg, #3b82f6 ${
                              progress * 3.6
                            }deg, transparent ${progress * 3.6}deg)`,
                          },
                        }),
                        React.createElement(
                          "span",
                          {
                            key: "percentage",
                            className:
                              "text-2xl font-bold text-gray-900 dark:text-white",
                          },
                          `${progress}%`
                        ),
                      ]
                    )
                  ),

                  React.createElement("div", { key: "stats" }, [
                    React.createElement(
                      "p",
                      {
                        key: "sessions",
                        className:
                          "text-3xl font-bold text-gray-900 dark:text-white",
                      },
                      "3/4"
                    ),
                    React.createElement(
                      "p",
                      {
                        key: "label",
                        className: "text-gray-600 dark:text-gray-400",
                      },
                      "Sessions Today"
                    ),
                    React.createElement(
                      "p",
                      {
                        key: "change",
                        className:
                          "text-sm text-green-600 dark:text-green-400 mt-1",
                      },
                      "+1 from yesterday"
                    ),
                  ]),
                ]
              ),
            ]
          );
        };

        // Journals Written Card
        const JournalsWrittenCard = () => {
          const journalData = [
            { type: "Reflection", count: 5, color: "bg-blue-500" },
            { type: "Gratitude", count: 3, color: "bg-green-500" },
            { type: "Goals", count: 2, color: "bg-purple-500" },
          ];

          return React.createElement(
            Card,
            {
              className:
                "bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-900/20 dark:to-emerald-900/20",
            },
            [
              React.createElement(
                "div",
                {
                  key: "header",
                  className: "flex items-center justify-between mb-4",
                },
                [
                  React.createElement(
                    "h3",
                    {
                      key: "title",
                      className:
                        "text-lg font-semibold text-gray-900 dark:text-white",
                    },
                    "Journals Written"
                  ),
                  React.createElement(
                    "span",
                    { key: "icon", className: "text-2xl" },
                    "📝"
                  ),
                ]
              ),

              React.createElement(
                "div",
                {
                  key: "content",
                  className: "flex items-center space-x-4",
                },
                [
                  React.createElement(
                    "div",
                    {
                      key: "chart",
                      className: "relative w-20 h-20",
                    },
                    React.createElement(
                      "div",
                      {
                        className:
                          "w-20 h-20 rounded-full border-8 border-gray-200 dark:border-gray-700 flex items-center justify-center",
                      },
                      [
                        React.createElement("div", {
                          key: "progress-ring",
                          className:
                            "absolute inset-0 rounded-full border-8 border-green-600 border-t-transparent transform -rotate-90",
                          style: {
                            background: `conic-gradient(from 0deg, #10b981 0deg, #10b981 270deg, transparent 270deg)`,
                          },
                        }),
                        React.createElement(
                          "span",
                          {
                            key: "count",
                            className:
                              "text-lg font-bold text-gray-900 dark:text-white",
                          },
                          "10"
                        ),
                      ]
                    )
                  ),

                  React.createElement(
                    "div",
                    {
                      key: "breakdown",
                      className: "flex-1",
                    },
                    [
                      React.createElement(
                        "p",
                        {
                          key: "title",
                          className:
                            "text-2xl font-bold text-gray-900 dark:text-white mb-2",
                        },
                        "This Week"
                      ),
                      React.createElement(
                        "div",
                        {
                          key: "data",
                          className: "space-y-1",
                        },
                        journalData.map((item, index) =>
                          React.createElement(
                            "div",
                            {
                              key: index,
                              className:
                                "flex items-center justify-between text-sm",
                            },
                            [
                              React.createElement(
                                "div",
                                {
                                  key: "label",
                                  className: "flex items-center space-x-2",
                                },
                                [
                                  React.createElement("div", {
                                    key: "dot",
                                    className: `w-3 h-3 rounded-full ${item.color}`,
                                  }),
                                  React.createElement(
                                    "span",
                                    {
                                      key: "type",
                                      className:
                                        "text-gray-600 dark:text-gray-400",
                                    },
                                    item.type
                                  ),
                                ]
                              ),
                              React.createElement(
                                "span",
                                {
                                  key: "count",
                                  className:
                                    "font-medium text-gray-900 dark:text-white",
                                },
                                item.count
                              ),
                            ]
                          )
                        )
                      ),
                    ]
                  ),
                ]
              ),
            ]
          );
        };

        // Leaderboard Card
        const LeaderboardCard = () => {
          const topUsers = [
            { name: "Alex Chen", score: 1250, avatar: "AC", rank: 1 },
            { name: "Sarah Kim", score: 1180, avatar: "SK", rank: 2 },
            { name: "Mike Johnson", score: 1100, avatar: "MJ", rank: 3 },
          ];

          return React.createElement(
            Card,
            {
              className:
                "bg-gradient-to-br from-yellow-50 to-orange-100 dark:from-yellow-900/20 dark:to-orange-900/20",
            },
            [
              React.createElement(
                "div",
                {
                  key: "header",
                  className: "flex items-center justify-between mb-4",
                },
                [
                  React.createElement(
                    "h3",
                    {
                      key: "title",
                      className:
                        "text-lg font-semibold text-gray-900 dark:text-white",
                    },
                    "Leaderboard"
                  ),
                  React.createElement(
                    "span",
                    { key: "icon", className: "text-2xl" },
                    "🏆"
                  ),
                ]
              ),

              React.createElement(
                "div",
                {
                  key: "users",
                  className: "space-y-3",
                },
                topUsers.map((user, index) =>
                  React.createElement(
                    "div",
                    {
                      key: index,
                      className: "flex items-center space-x-3",
                    },
                    [
                      React.createElement(
                        "div",
                        {
                          key: "rank",
                          className:
                            "flex items-center justify-center w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full text-white text-sm font-bold",
                        },
                        user.rank
                      ),
                      React.createElement(
                        "div",
                        {
                          key: "avatar",
                          className:
                            "w-8 h-8 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center",
                        },
                        React.createElement(
                          "span",
                          {
                            className: "text-white text-xs font-semibold",
                          },
                          user.avatar
                        )
                      ),
                      React.createElement(
                        "div",
                        {
                          key: "info",
                          className: "flex-1",
                        },
                        [
                          React.createElement(
                            "p",
                            {
                              key: "name",
                              className:
                                "font-medium text-gray-900 dark:text-white",
                            },
                            user.name
                          ),
                          React.createElement(
                            "p",
                            {
                              key: "score",
                              className:
                                "text-sm text-gray-600 dark:text-gray-400",
                            },
                            `${user.score} XP`
                          ),
                        ]
                      ),
                    ]
                  )
                )
              ),
            ]
          );
        };

        // Weekly Stats Card
        const WeeklyStatsCard = () => {
          const weeklyData = [
            { day: "Mon", sessions: 3 },
            { day: "Tue", sessions: 4 },
            { day: "Wed", sessions: 2 },
            { day: "Thu", sessions: 5 },
            { day: "Fri", sessions: 3 },
            { day: "Sat", sessions: 1 },
            { day: "Sun", sessions: 2 },
          ];

          const maxSessions = Math.max(...weeklyData.map((d) => d.sessions));

          return React.createElement(
            Card,
            {
              className:
                "bg-gradient-to-br from-purple-50 to-pink-100 dark:from-purple-900/20 dark:to-pink-900/20",
            },
            [
              React.createElement(
                "div",
                {
                  key: "header",
                  className: "flex items-center justify-between mb-4",
                },
                [
                  React.createElement(
                    "h3",
                    {
                      key: "title",
                      className:
                        "text-lg font-semibold text-gray-900 dark:text-white",
                    },
                    "Weekly Stats"
                  ),
                  React.createElement(
                    "span",
                    { key: "icon", className: "text-2xl" },
                    "📊"
                  ),
                ]
              ),

              React.createElement(
                "div",
                {
                  key: "chart",
                  className: "flex items-end justify-between h-32",
                },
                weeklyData.map((day, index) =>
                  React.createElement(
                    "div",
                    {
                      key: index,
                      className: "flex flex-col items-center space-y-2",
                    },
                    [
                      React.createElement("div", {
                        key: "bar",
                        className:
                          "bg-purple-600 rounded-t-lg transition-all duration-500 ease-out",
                        style: {
                          width: "24px",
                          height: `${(day.sessions / maxSessions) * 80}px`,
                          minHeight: "8px",
                        },
                      }),
                      React.createElement(
                        "span",
                        {
                          key: "day",
                          className: "text-xs text-gray-600 dark:text-gray-400",
                        },
                        day.day
                      ),
                      React.createElement(
                        "span",
                        {
                          key: "sessions",
                          className:
                            "text-xs font-medium text-gray-900 dark:text-white",
                        },
                        day.sessions
                      ),
                    ]
                  )
                )
              ),
            ]
          );
        };

        // Quick Actions Card
        const QuickActionsCard = () => {
          const actions = [
            {
              icon: "⚡",
              label: "Start Defocus",
              color: "bg-red-500 hover:bg-red-600",
            },
            {
              icon: "📝",
              label: "Write Journal",
              color: "bg-blue-500 hover:bg-blue-600",
            },
            {
              icon: "🎮",
              label: "Play Game",
              color: "bg-green-500 hover:bg-green-600",
            },
          ];

          return React.createElement(
            Card,
            {
              className:
                "bg-gradient-to-br from-gray-50 to-slate-100 dark:from-gray-800 dark:to-slate-700",
            },
            [
              React.createElement(
                "div",
                {
                  key: "header",
                  className: "flex items-center justify-between mb-4",
                },
                [
                  React.createElement(
                    "h3",
                    {
                      key: "title",
                      className:
                        "text-lg font-semibold text-gray-900 dark:text-white",
                    },
                    "Quick Actions"
                  ),
                  React.createElement(
                    "span",
                    { key: "icon", className: "text-2xl" },
                    "⚡"
                  ),
                ]
              ),

              React.createElement(
                "div",
                {
                  key: "actions",
                  className: "space-y-3",
                },
                actions.map((action, index) =>
                  React.createElement(
                    "button",
                    {
                      key: index,
                      className: `w-full flex items-center space-x-3 p-3 ${action.color} text-white rounded-xl transition-all duration-200 hover:scale-105`,
                    },
                    [
                      React.createElement(
                        "span",
                        { key: "icon", className: "text-xl" },
                        action.icon
                      ),
                      React.createElement(
                        "span",
                        { key: "label", className: "font-medium" },
                        action.label
                      ),
                    ]
                  )
                )
              ),
            ]
          );
        };

        // History Summary Card
        const HistorySummaryCard = () => {
          const activities = [
            {
              type: "focus",
              title: "Deep Work Session",
              time: "2 hours ago",
              avatar: "🎯",
              stats: "25 min",
              tag: "Productivity",
            },
            {
              type: "journal",
              title: "Daily Reflection",
              time: "4 hours ago",
              avatar: "📝",
              stats: "5 min",
              tag: "Mindfulness",
            },
            {
              type: "game",
              title: "Puzzle Challenge",
              time: "6 hours ago",
              avatar: "🧩",
              stats: "Level 3",
              tag: "Relaxation",
            },
          ];

          return React.createElement(
            Card,
            {
              className:
                "bg-gradient-to-br from-indigo-50 to-blue-100 dark:from-indigo-900/20 dark:to-blue-900/20",
            },
            [
              React.createElement(
                "div",
                {
                  key: "header",
                  className: "flex items-center justify-between mb-4",
                },
                [
                  React.createElement(
                    "h3",
                    {
                      key: "title",
                      className:
                        "text-lg font-semibold text-gray-900 dark:text-white",
                    },
                    "Recent Activity"
                  ),
                  React.createElement(
                    "span",
                    { key: "icon", className: "text-2xl" },
                    "🕐"
                  ),
                ]
              ),

              React.createElement(
                "div",
                {
                  key: "activities",
                  className: "space-y-4",
                },
                activities.map((activity, index) =>
                  React.createElement(
                    "div",
                    {
                      key: index,
                      className:
                        "flex items-center space-x-3 p-3 bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow",
                    },
                    [
                      React.createElement(
                        "div",
                        {
                          key: "avatar",
                          className: "text-2xl",
                        },
                        activity.avatar
                      ),
                      React.createElement(
                        "div",
                        {
                          key: "content",
                          className: "flex-1",
                        },
                        [
                          React.createElement(
                            "div",
                            {
                              key: "header",
                              className: "flex items-center justify-between",
                            },
                            [
                              React.createElement(
                                "h4",
                                {
                                  key: "title",
                                  className:
                                    "font-medium text-gray-900 dark:text-white",
                                },
                                activity.title
                              ),
                              React.createElement(
                                "span",
                                {
                                  key: "time",
                                  className:
                                    "text-sm text-gray-500 dark:text-gray-400",
                                },
                                activity.time
                              ),
                            ]
                          ),
                          React.createElement(
                            "div",
                            {
                              key: "footer",
                              className: "flex items-center space-x-2 mt-1",
                            },
                            [
                              React.createElement(
                                "span",
                                {
                                  key: "stats",
                                  className:
                                    "text-sm text-gray-600 dark:text-gray-400",
                                },
                                activity.stats
                              ),
                              React.createElement(
                                "span",
                                {
                                  key: "tag",
                                  className:
                                    "text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-2 py-1 rounded-full",
                                },
                                activity.tag
                              ),
                            ]
                          ),
                        ]
                      ),
                      React.createElement(
                        "svg",
                        {
                          key: "arrow",
                          className: "w-4 h-4 text-gray-400",
                          fill: "none",
                          stroke: "currentColor",
                          viewBox: "0 0 24 24",
                        },
                        React.createElement("path", {
                          strokeLinecap: "round",
                          strokeLinejoin: "round",
                          strokeWidth: 2,
                          d: "M9 5l7 7-7 7",
                        })
                      ),
                    ]
                  )
                )
              ),
            ]
          );
        };

        return React.createElement(
          "div",
          {
            className: `min-h-screen ${isDarkMode ? "dark" : ""}`,
          },
          [
            React.createElement(
              "div",
              {
                key: "main",
                className: "flex",
              },
              [
                // Sidebar
                React.createElement(Sidebar, {
                  key: "sidebar",
                  activeTab,
                  setActiveTab,
                  user,
                }),

                // Main Content
                React.createElement(
                  "div",
                  {
                    key: "content",
                    className: "flex-1 flex flex-col",
                  },
                  [
                    // Top Bar
                    React.createElement(TopBar, {
                      key: "topbar",
                      user,
                    }),

                    // Dashboard Content
                    React.createElement(
                      "div",
                      {
                        key: "dashboard",
                        className: "flex-1 p-6 bg-gray-50 dark:bg-gray-900",
                      },
                      React.createElement(
                        "div",
                        {
                          className: "max-w-7xl mx-auto",
                        },
                        [
                          // Stats Grid
                          React.createElement(
                            "div",
                            {
                              key: "stats-grid",
                              className:
                                "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",
                            },
                            [
                              React.createElement(FocusProgressCard, {
                                key: "focus-progress",
                              }),
                              React.createElement(JournalsWrittenCard, {
                                key: "journals",
                              }),
                              React.createElement(LeaderboardCard, {
                                key: "leaderboard",
                              }),
                              React.createElement(WeeklyStatsCard, {
                                key: "weekly-stats",
                              }),
                            ]
                          ),

                          // Bottom Grid
                          React.createElement(
                            "div",
                            {
                              key: "bottom-grid",
                              className:
                                "grid grid-cols-1 lg:grid-cols-2 gap-6",
                            },
                            [
                              React.createElement(QuickActionsCard, {
                                key: "quick-actions",
                              }),
                              React.createElement(HistorySummaryCard, {
                                key: "history",
                              }),
                            ]
                          ),
                        ]
                      )
                    ),
                  ]
                ),
              ]
            ),

            // Dark Mode Toggle
            React.createElement(
              "button",
              {
                key: "dark-mode-toggle",
                onClick: toggleDarkMode,
                className:
                  "fixed bottom-6 right-6 w-12 h-12 bg-gray-800 dark:bg-gray-200 text-white dark:text-gray-800 rounded-full flex items-center justify-center shadow-lg z-50 hover:scale-105 transition-transform",
              },
              isDarkMode ? "☀️" : "🌙"
            ),
          ]
        );
      };

      const WebApp = () => {
        const [currentScreen, setCurrentScreen] = useState("dashboard");
        const username =
          localStorage.getItem("defocus2focus_username") || "User";

        const renderDashboard = () => {
          return React.createElement(
            "div",
            {
              className:
                "min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-indigo-900",
            },
            [
              // Header
              React.createElement(
                "header",
                {
                  key: "header",
                  className:
                    "bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",
                },
                React.createElement(
                  "div",
                  {
                    className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",
                  },
                  React.createElement(
                    "div",
                    {
                      className: "flex items-center justify-between h-16",
                    },
                    [
                      React.createElement(
                        "div",
                        {
                          key: "logo",
                          className: "flex items-center",
                        },
                        React.createElement(
                          "h1",
                          {
                            className:
                              "text-xl font-bold text-gray-900 dark:text-white",
                          },
                          "🎯 Defocus2Focus"
                        )
                      ),
                      React.createElement(
                        "div",
                        {
                          key: "header-actions",
                          className: "flex items-center space-x-4",
                        },
                        [
                          React.createElement(
                            "button",
                            {
                              key: "notifications",
                              className:
                                "p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",
                            },
                            "🔔"
                          ),
                          React.createElement(
                            "button",
                            {
                              key: "dark-mode",
                              onClick: () =>
                                document.documentElement.classList.toggle(
                                  "dark"
                                ),
                              className:
                                "p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",
                            },
                            "🌙"
                          ),
                        ]
                      ),
                    ]
                  )
                )
              ),
              // Main Content
              React.createElement(
                "main",
                {
                  key: "main",
                  className: "flex-1 p-6",
                },
                React.createElement(
                  "div",
                  {
                    className: "max-w-7xl mx-auto",
                  },
                  [
                    // Top Section - Greeting and Streak
                    React.createElement(
                      "div",
                      {
                        key: "top-section",
                        className: "mb-8",
                      },
                      [
                        React.createElement(
                          "h1",
                          {
                            key: "greeting",
                            className:
                              "text-3xl font-bold text-gray-900 dark:text-white mb-2",
                          },
                          `Hi ${username} 👋`
                        ),
                        React.createElement(
                          "div",
                          {
                            key: "streak",
                            className: "flex items-center mb-4",
                          },
                          [
                            React.createElement(
                              "span",
                              { key: "fire", className: "text-2xl mr-2" },
                              "🔥"
                            ),
                            React.createElement(
                              "span",
                              {
                                key: "streak-text",
                                className:
                                  "text-lg text-gray-600 dark:text-gray-400",
                              },
                              "7-day streak"
                            ),
                          ]
                        ),
                        React.createElement(
                          "div",
                          {
                            key: "quote",
                            className:
                              "bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm",
                          },
                          React.createElement(
                            "p",
                            {
                              className:
                                "text-gray-700 dark:text-gray-300 italic text-center",
                            },
                            '"Every expert was once a beginner. Every pro was once an amateur."'
                          )
                        ),
                      ]
                    ),
                    // Middle Section - Progress and Stats
                    React.createElement(
                      "div",
                      {
                        key: "middle-section",
                        className: "mb-8",
                      },
                      [
                        // Today's Progress
                        React.createElement(
                          "div",
                          {
                            key: "progress-card",
                            className:
                              "bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm mb-6",
                          },
                          [
                            React.createElement(
                              "h3",
                              {
                                key: "progress-title",
                                className:
                                  "text-xl font-semibold text-gray-900 dark:text-white mb-4 text-center",
                              },
                              "Today's Focus Progress"
                            ),
                            React.createElement(
                              "div",
                              {
                                key: "progress-circle",
                                className: "flex justify-center mb-4",
                              },
                              React.createElement(
                                "div",
                                {
                                  className: "relative w-24 h-24",
                                },
                                [
                                  React.createElement("div", {
                                    key: "circle-bg",
                                    className:
                                      "w-24 h-24 bg-gray-200 dark:bg-gray-700 rounded-full",
                                  }),
                                  React.createElement("div", {
                                    key: "circle-progress",
                                    className:
                                      "absolute inset-0 w-24 h-24 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full",
                                    style: {
                                      clipPath:
                                        "polygon(50% 50%, 50% 0%, 100% 0%, 100% 100%, 0% 100%, 0% 0%, 50% 0%)",
                                    },
                                  }),
                                  React.createElement(
                                    "div",
                                    {
                                      key: "circle-text",
                                      className:
                                        "absolute inset-0 flex items-center justify-center",
                                    },
                                    React.createElement(
                                      "span",
                                      {
                                        className:
                                          "text-xl font-bold text-gray-900 dark:text-white",
                                      },
                                      "60%"
                                    )
                                  ),
                                ]
                              )
                            ),
                            React.createElement(
                              "p",
                              {
                                key: "progress-text",
                                className:
                                  "text-center text-gray-600 dark:text-gray-400",
                              },
                              "3 of 5 sessions completed"
                            ),
                          ]
                        ),
                        // Stats Cards
                        React.createElement(
                          "div",
                          {
                            key: "stats-grid",
                            className: "grid grid-cols-3 gap-4",
                          },
                          [
                            React.createElement(
                              "div",
                              {
                                key: "sessions-stat",
                                className:
                                  "bg-blue-100 dark:bg-blue-900 rounded-xl p-4 text-center",
                              },
                              [
                                React.createElement(
                                  "div",
                                  {
                                    key: "sessions-icon",
                                    className: "text-2xl mb-1",
                                  },
                                  "🎯"
                                ),
                                React.createElement(
                                  "div",
                                  {
                                    key: "sessions-value",
                                    className:
                                      "text-2xl font-bold text-blue-600 dark:text-blue-400",
                                  },
                                  "47"
                                ),
                                React.createElement(
                                  "div",
                                  {
                                    key: "sessions-label",
                                    className:
                                      "text-xs text-gray-600 dark:text-gray-400",
                                  },
                                  "Total Sessions"
                                ),
                              ]
                            ),
                            React.createElement(
                              "div",
                              {
                                key: "hours-stat",
                                className:
                                  "bg-green-100 dark:bg-green-900 rounded-xl p-4 text-center",
                              },
                              [
                                React.createElement(
                                  "div",
                                  {
                                    key: "hours-icon",
                                    className: "text-2xl mb-1",
                                  },
                                  "⏰"
                                ),
                                React.createElement(
                                  "div",
                                  {
                                    key: "hours-value",
                                    className:
                                      "text-2xl font-bold text-green-600 dark:text-green-400",
                                  },
                                  "23.5"
                                ),
                                React.createElement(
                                  "div",
                                  {
                                    key: "hours-label",
                                    className:
                                      "text-xs text-gray-600 dark:text-gray-400",
                                  },
                                  "Hours Focused"
                                ),
                              ]
                            ),
                            React.createElement(
                              "div",
                              {
                                key: "journal-stat",
                                className:
                                  "bg-purple-100 dark:bg-purple-900 rounded-xl p-4 text-center",
                              },
                              [
                                React.createElement(
                                  "div",
                                  {
                                    key: "journal-icon",
                                    className: "text-2xl mb-1",
                                  },
                                  "📝"
                                ),
                                React.createElement(
                                  "div",
                                  {
                                    key: "journal-value",
                                    className:
                                      "text-2xl font-bold text-purple-600 dark:text-purple-400",
                                  },
                                  "12"
                                ),
                                React.createElement(
                                  "div",
                                  {
                                    key: "journal-label",
                                    className:
                                      "text-xs text-gray-600 dark:text-gray-400",
                                  },
                                  "Journal Entries"
                                ),
                              ]
                            ),
                          ]
                        ),
                      ]
                    ),
                    // Main Actions Grid
                    React.createElement(
                      "div",
                      {
                        key: "actions-section",
                        className: "mb-8",
                      },
                      [
                        React.createElement(
                          "h2",
                          {
                            key: "actions-title",
                            className:
                              "text-2xl font-bold text-gray-900 dark:text-white mb-6",
                          },
                          "Quick Actions"
                        ),
                        // Start Defocus - Large Card
                        React.createElement(
                          "div",
                          {
                            key: "start-defocus-large",
                            className: "flex justify-center mb-6",
                          },
                          React.createElement(
                            "button",
                            {
                              onClick: () => setCurrentScreen("defocus"),
                              className:
                                "bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow w-full max-w-md",
                            },
                            [
                              React.createElement(
                                "div",
                                {
                                  key: "defocus-icon",
                                  className: "text-4xl mb-2",
                                },
                                "🚀"
                              ),
                              React.createElement(
                                "div",
                                {
                                  key: "defocus-title",
                                  className: "text-xl font-bold mb-1",
                                },
                                "Start Defocus"
                              ),
                              React.createElement(
                                "div",
                                {
                                  key: "defocus-subtitle",
                                  className: "text-blue-100 text-sm",
                                },
                                "Begin your focus session"
                              ),
                            ]
                          )
                        ),
                        // Feature Cards Grid
                        React.createElement(
                          "div",
                          {
                            key: "feature-grid",
                            className: "grid grid-cols-2 md:grid-cols-3 gap-4",
                          },
                          [
                            React.createElement(
                              "button",
                              {
                                key: "journal-card",
                                onClick: () => setCurrentScreen("journal"),
                                className:
                                  "bg-gradient-to-r from-pink-400 to-red-400 text-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow",
                              },
                              [
                                React.createElement(
                                  "div",
                                  {
                                    key: "journal-icon",
                                    className: "text-3xl mb-2",
                                  },
                                  "📓"
                                ),
                                React.createElement(
                                  "div",
                                  {
                                    key: "journal-title",
                                    className: "font-semibold text-sm",
                                  },
                                  "Journal"
                                ),
                              ]
                            ),
                            React.createElement(
                              "button",
                              {
                                key: "games-card",
                                onClick: () => setCurrentScreen("games"),
                                className:
                                  "bg-gradient-to-r from-cyan-400 to-blue-400 text-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow",
                              },
                              [
                                React.createElement(
                                  "div",
                                  {
                                    key: "games-icon",
                                    className: "text-3xl mb-2",
                                  },
                                  "🎮"
                                ),
                                React.createElement(
                                  "div",
                                  {
                                    key: "games-title",
                                    className: "font-semibold text-sm",
                                  },
                                  "Games"
                                ),
                              ]
                            ),
                            React.createElement(
                              "button",
                              {
                                key: "ai-therapist-card",
                                onClick: () => setCurrentScreen("aiTherapist"),
                                className:
                                  "bg-gradient-to-r from-green-400 to-teal-400 text-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow",
                              },
                              [
                                React.createElement(
                                  "div",
                                  {
                                    key: "ai-icon",
                                    className: "text-3xl mb-2",
                                  },
                                  "🤖"
                                ),
                                React.createElement(
                                  "div",
                                  {
                                    key: "ai-title",
                                    className: "font-semibold text-sm",
                                  },
                                  "AI Therapist"
                                ),
                              ]
                            ),
                            React.createElement(
                              "button",
                              {
                                key: "leaderboard-card",
                                onClick: () => setCurrentScreen("leaderboard"),
                                className:
                                  "bg-gradient-to-r from-yellow-400 to-orange-400 text-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow",
                              },
                              [
                                React.createElement(
                                  "div",
                                  {
                                    key: "leaderboard-icon",
                                    className: "text-3xl mb-2",
                                  },
                                  "🏆"
                                ),
                                React.createElement(
                                  "div",
                                  {
                                    key: "leaderboard-title",
                                    className: "font-semibold text-sm",
                                  },
                                  "Leaderboard"
                                ),
                              ]
                            ),
                            React.createElement(
                              "button",
                              {
                                key: "history-card",
                                onClick: () => setCurrentScreen("history"),
                                className:
                                  "bg-gradient-to-r from-purple-400 to-pink-400 text-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow",
                              },
                              [
                                React.createElement(
                                  "div",
                                  {
                                    key: "history-icon",
                                    className: "text-3xl mb-2",
                                  },
                                  "📊"
                                ),
                                React.createElement(
                                  "div",
                                  {
                                    key: "history-title",
                                    className: "font-semibold text-sm",
                                  },
                                  "History"
                                ),
                              ]
                            ),
                          ]
                        ),
                      ]
                    ),
                    // Bottom Section
                    React.createElement(
                      "div",
                      {
                        key: "bottom-section",
                      },
                      [
                        // Today's Focus Goal Progress
                        React.createElement(
                          "div",
                          {
                            key: "goal-progress",
                            className:
                              "bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm mb-4",
                          },
                          [
                            React.createElement(
                              "h3",
                              {
                                key: "goal-title",
                                className:
                                  "text-lg font-semibold text-gray-900 dark:text-white mb-4",
                              },
                              "Today's Focus Goal"
                            ),
                            React.createElement(
                              "div",
                              {
                                key: "goal-progress-bar",
                                className:
                                  "flex items-center justify-between mb-2",
                              },
                              [
                                React.createElement(
                                  "span",
                                  {
                                    key: "goal-label",
                                    className:
                                      "text-gray-600 dark:text-gray-400",
                                  },
                                  "Progress"
                                ),
                                React.createElement(
                                  "span",
                                  {
                                    key: "goal-value",
                                    className:
                                      "text-gray-900 dark:text-white font-semibold",
                                  },
                                  "3/5 hours"
                                ),
                              ]
                            ),
                            React.createElement(
                              "div",
                              {
                                key: "progress-bar-bg",
                                className:
                                  "w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",
                              },
                              React.createElement("div", {
                                key: "progress-bar-fill",
                                className:
                                  "bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full",
                                style: { width: "60%" },
                              })
                            ),
                          ]
                        ),
                        // Challenge a Friend Button
                        React.createElement(
                          "button",
                          {
                            key: "challenge-button",
                            onClick: () => setCurrentScreen("challenge"),
                            className:
                              "w-full bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-2xl p-4 shadow-lg hover:shadow-xl transition-shadow",
                          },
                          [
                            React.createElement(
                              "div",
                              {
                                key: "challenge-content",
                                className: "flex items-center justify-center",
                              },
                              [
                                React.createElement(
                                  "span",
                                  {
                                    key: "challenge-icon",
                                    className: "text-2xl mr-2",
                                  },
                                  "⚔️"
                                ),
                                React.createElement(
                                  "span",
                                  {
                                    key: "challenge-text",
                                    className: "font-bold text-lg",
                                  },
                                  "Challenge a Friend"
                                ),
                              ]
                            ),
                          ]
                        ),
                      ]
                    ),
                  ]
                )
              ),
            ]
          );
        };

        const renderCurrentScreen = () => {
          switch (currentScreen) {
            case "dashboard":
              return renderDashboard();
            default:
              return renderDashboard();
          }
        };

        return React.createElement(
          "div",
          {
            className: "min-h-screen bg-gray-50",
          },
          renderCurrentScreen()
        );
      };

      // Render the app
      ReactDOM.render(
        React.createElement(WebApp),
        document.getElementById("root")
      );
    </script>
  </body>
</html>
